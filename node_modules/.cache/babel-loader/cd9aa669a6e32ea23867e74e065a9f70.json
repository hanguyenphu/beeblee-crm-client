{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Row,Col,Table,Icon}from\"react-materialize\";import EditContactForm from\"./EditContactForm\";import API from\"../../utils/API/API\";export var ContactTable=/*#__PURE__*/function(_Component){_inherits(ContactTable,_Component);function ContactTable(props){var _this;_classCallCheck(this,ContactTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(ContactTable).call(this,props));_this.handleRemoveContact=function(contactId){return function(){var business=_this.props.business;var confirmed=window.confirm(\"Do you want to remove this contact from the business?\");if(confirmed){API.patch(\"businesses/removeContact/\".concat(business._id),{contactId:contactId}).then(function(response){var contactIds=response.data.contacts;var contacts=_this.state.contacts;contacts=contacts.filter(function(contact){return contactIds.includes(contact._id);});_this.setState(_objectSpread({},_this.state,{contacts:contacts}));}).catch(function(error){console.log(error);});}};};_this.handleEditContact=function(contact){return function(){_this.setState({individualContact:contact});};};_this.handleCloseEditContact=function(){_this.setState({individualContact:null});};_this.updateContact=function(updatedContact){var contacts=_this.state.contacts;contacts=contacts.map(function(contact){return contact._id==updatedContact._id?updatedContact:contact;});_this.setState({contacts:contacts});};_this.state={contacts:[]};return _this;}_createClass(ContactTable,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({contacts:this.props.contacts});}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(prevProps){if(prevProps.contacts.length!==this.props.contacts.length){this.setState({contacts:this.props.contacts});}}},{key:\"render\",value:function render(){var _this2=this;var contacts=this.state.contacts;return React.createElement(Row,null,React.createElement(Col,{x:12,s:12,l:12,m:12,xl:12},React.createElement(Table,{x:12,s:12,l:12,m:12,xl:12,className:\"radius-corner\",striped:true,responsive:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{\"data-field\":\"id\"},\"Name\"),React.createElement(\"th\",{\"data-field\":\"name\"},\"Phone\"),React.createElement(\"th\",{\"data-field\":\"email\"},\"Email\"),React.createElement(\"th\",{\"data-field\":\"action\"},\"Action\"))),React.createElement(\"tbody\",null,contacts.map(function(contact){return React.createElement(\"tr\",{key:contact._id},React.createElement(\"td\",null,contact.name),React.createElement(\"td\",null,contact.phone),React.createElement(\"td\",null,contact.email),React.createElement(\"td\",null,React.createElement(\"a\",{href:\"#\",style:{marginRight:\"20px\"},onClick:_this2.handleEditContact(contact)},React.createElement(Icon,null,\"create\")),React.createElement(\"a\",{href:\"#\",style:{color:\"red\"},onClick:_this2.handleRemoveContact(contact._id)},React.createElement(Icon,null,\"clear\"))));})))),this.state.individualContact&&React.createElement(EditContactForm,{contact:this.state.individualContact,updateContact:this.updateContact,closeEditContact:this.handleCloseEditContact}));}}]);return ContactTable;}(Component);var mapStateToProps=function mapStateToProps(state){return{};};var mapDispatchToProps={};export default connect(mapStateToProps,mapDispatchToProps)(ContactTable);","map":{"version":3,"sources":["C:/xampp/htdocs/beeblee-crm-client/src/features/contact/ContactTable.jsx"],"names":["React","Component","connect","Row","Col","Table","Icon","EditContactForm","API","ContactTable","props","handleRemoveContact","contactId","business","confirmed","window","confirm","patch","_id","then","response","contactIds","data","contacts","state","filter","contact","includes","setState","catch","error","console","log","handleEditContact","individualContact","handleCloseEditContact","updateContact","updatedContact","map","prevProps","length","name","phone","email","marginRight","color","mapStateToProps","mapDispatchToProps"],"mappings":"i8BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,KAAnB,CAA0BC,IAA1B,KAAsC,mBAAtC,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,CACA,UAAaC,CAAAA,YAAb,sEAEI,sBAAYC,KAAZ,CAAmB,8CACf,8EAAMA,KAAN,GADe,MAqBnBC,mBArBmB,CAqBG,SAACC,SAAD,QAAe,WAAM,IAChCC,CAAAA,QADgC,CACpB,MAAKH,KADe,CAChCG,QADgC,CAEvC,GAAMC,CAAAA,SAAS,CAAGC,MAAM,CAACC,OAAP,CAAe,uDAAf,CAAlB,CAEA,GAAGF,SAAH,CAAc,CAEVN,GAAG,CAACS,KAAJ,oCAAsCJ,QAAQ,CAACK,GAA/C,EAAsD,CAACN,SAAS,CAATA,SAAD,CAAtD,EAAmEO,IAAnE,CAAwE,SAAAC,QAAQ,CAAI,CAChF,GAAIC,CAAAA,UAAU,CAAID,QAAQ,CAACE,IAAT,CAAcC,QAAhC,CACA,GAAIA,CAAAA,QAAQ,CAAG,MAAKC,KAAL,CAAWD,QAA1B,CACAA,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,SAAAC,OAAO,CAAI,CAClC,MAAOL,CAAAA,UAAU,CAACM,QAAX,CAAoBD,OAAO,CAACR,GAA5B,CAAP,CACH,CAFU,CAAX,CAGA,MAAKU,QAAL,kBACO,MAAKJ,KADZ,EAEID,QAAQ,CAARA,QAFJ,IAIH,CAVD,EAUGM,KAVH,CAUS,SAAAC,KAAK,CAAI,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAZD,EAaH,CACJ,CApBqB,EArBH,OA2CnBG,iBA3CmB,CA2CC,SAACP,OAAD,QAAa,WAAM,CACnC,MAAKE,QAAL,CAAc,CACVM,iBAAiB,CAAER,OADT,CAAd,EAGH,CAJmB,EA3CD,OAiDnBS,sBAjDmB,CAiDM,UAAM,CAC3B,MAAKP,QAAL,CAAc,CACVM,iBAAiB,CAAE,IADT,CAAd,EAGH,CArDkB,OAuDnBE,aAvDmB,CAuDH,SAACC,cAAD,CAAoB,CAChC,GAAId,CAAAA,QAAQ,CAAG,MAAKC,KAAL,CAAWD,QAA1B,CACAA,QAAQ,CAAGA,QAAQ,CAACe,GAAT,CAAa,SAAAZ,OAAO,CAAI,CAC/B,MAAOA,CAAAA,OAAO,CAACR,GAAR,EAAemB,cAAc,CAACnB,GAA9B,CAAmCmB,cAAnC,CAAkDX,OAAzD,CACH,CAFU,CAAX,CAGA,MAAKE,QAAL,CAAc,CACVL,QAAQ,CAARA,QADU,CAAd,EAIH,CAhEkB,CAEf,MAAKC,KAAL,CAAa,CACTD,QAAQ,CAAE,EADD,CAAb,CAFe,aAKlB,CAPL,sFASwB,CAChB,KAAKK,QAAL,CAAc,CACVL,QAAQ,CAAE,KAAKb,KAAL,CAAWa,QADX,CAAd,EAGH,CAbL,4EAc8BgB,SAd9B,CAcyC,CACjC,GAAGA,SAAS,CAAChB,QAAV,CAAmBiB,MAAnB,GAA8B,KAAK9B,KAAL,CAAWa,QAAX,CAAoBiB,MAArD,CAA6D,CAEzD,KAAKZ,QAAL,CAAc,CACVL,QAAQ,CAAE,KAAKb,KAAL,CAAWa,QADX,CAAd,EAGH,CACJ,CArBL,uCAmEa,oBACGA,CAAAA,QADH,CACgB,KAAKC,KADrB,CACGD,QADH,CAGL,MACI,qBAAC,GAAD,MACI,oBAAC,GAAD,EAAK,CAAC,CAAE,EAAR,CAAY,CAAC,CAAE,EAAf,CAAmB,CAAC,CAAE,EAAtB,CAA0B,CAAC,CAAE,EAA7B,CAAiC,EAAE,CAAE,EAArC,EACI,oBAAC,KAAD,EAAO,CAAC,CAAE,EAAV,CAAc,CAAC,CAAE,EAAjB,CAAqB,CAAC,CAAE,EAAxB,CAA4B,CAAC,CAAE,EAA/B,CAAmC,EAAE,CAAE,EAAvC,CAA4C,SAAS,CAAC,eAAtD,CAAsE,OAAO,CAAE,IAA/E,CAAqF,UAAU,CAAE,IAAjG,EACI,iCACI,8BACI,0BAAI,aAAW,IAAf,SADJ,CAEI,0BAAI,aAAW,MAAf,UAFJ,CAGI,0BAAI,aAAW,OAAf,UAHJ,CAII,0BAAI,aAAW,QAAf,WAJJ,CADJ,CADJ,CASI,iCACKA,QAAQ,CAACe,GAAT,CAAa,SAAAZ,OAAO,CAAI,CACrB,MACI,2BAAI,GAAG,CAAEA,OAAO,CAACR,GAAjB,EACI,8BAAKQ,OAAO,CAACe,IAAb,CADJ,CAEI,8BAAKf,OAAO,CAACgB,KAAb,CAFJ,CAGI,8BAAKhB,OAAO,CAACiB,KAAb,CAHJ,CAII,8BACI,yBAAG,IAAI,CAAC,GAAR,CACC,KAAK,CAAE,CACJC,WAAW,CAAE,MADT,CADR,CAKA,OAAO,CAAE,MAAI,CAACX,iBAAL,CAAuBP,OAAvB,CALT,EAMI,oBAAC,IAAD,eANJ,CADJ,CASI,yBACI,IAAI,CAAC,GADT,CAEI,KAAK,CAAE,CAEHmB,KAAK,CAAE,KAFJ,CAFX,CAMI,OAAO,CAAE,MAAI,CAAClC,mBAAL,CAAyBe,OAAO,CAACR,GAAjC,CANb,EAQI,oBAAC,IAAD,cARJ,CATJ,CAJJ,CADJ,CA2BH,CA5BA,CADL,CATJ,CADJ,CADJ,CA6CK,KAAKM,KAAL,CAAWU,iBAAX,EAAgC,oBAAC,eAAD,EAAiB,OAAO,CAAE,KAAKV,KAAL,CAAWU,iBAArC,CAAwD,aAAa,CAAE,KAAKE,aAA5E,CAA2F,gBAAgB,CAAE,KAAKD,sBAAlH,EA7CrC,CADJ,CAiDH,CAvHL,0BAAkClC,SAAlC,EA0HA,GAAM6C,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAtB,KAAK,QAAK,EAAL,EAA7B,CAEA,GAAMuB,CAAAA,kBAAkB,CAAG,EAA3B,CAEA,cAAe7C,CAAAA,OAAO,CAAC4C,eAAD,CAAkBC,kBAAlB,CAAP,CAA6CtC,YAA7C,CAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Row, Col, Table, Icon } from \"react-materialize\";\r\nimport EditContactForm from \"./EditContactForm\";\r\nimport API from \"../../utils/API/API\";\r\nexport class ContactTable extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            contacts: []\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            contacts: this.props.contacts\r\n        })\r\n    }\r\n    componentWillReceiveProps(prevProps) {\r\n        if(prevProps.contacts.length !== this.props.contacts.length) {\r\n\r\n            this.setState({\r\n                contacts: this.props.contacts\r\n            })\r\n        }\r\n    }\r\n\r\n    handleRemoveContact = (contactId) => () => {\r\n        const {business} = this.props\r\n        const confirmed = window.confirm(\"Do you want to remove this contact from the business?\")\r\n\r\n        if(confirmed) {\r\n\r\n            API.patch(`businesses/removeContact/${business._id}`, {contactId}).then(response => {\r\n                let contactIds  = response.data.contacts\r\n                let contacts = this.state.contacts\r\n                contacts = contacts.filter(contact => {\r\n                    return contactIds.includes(contact._id)\r\n                })\r\n                this.setState({\r\n                    ...this.state,\r\n                    contacts\r\n                })\r\n            }).catch(error => {\r\n                console.log(error)\r\n            })\r\n        }\r\n    }\r\n\r\n    handleEditContact = (contact) => () => {\r\n        this.setState({\r\n            individualContact: contact\r\n        })\r\n    }\r\n\r\n    handleCloseEditContact = () => {\r\n        this.setState({\r\n            individualContact: null\r\n        })\r\n    }\r\n\r\n    updateContact = (updatedContact) => {\r\n        let contacts = this.state.contacts\r\n        contacts = contacts.map(contact => {\r\n            return contact._id == updatedContact._id? updatedContact:contact\r\n        })\r\n        this.setState({\r\n            contacts\r\n        })\r\n\r\n    }\r\n    render() {\r\n        const { contacts } = this.state;\r\n\r\n        return (\r\n            <Row >\r\n                <Col x={12} s={12} l={12} m={12} xl={12}>\r\n                    <Table x={12} s={12} l={12} m={12} xl={12}  className=\"radius-corner\" striped={true} responsive={true}>\r\n                        <thead>\r\n                            <tr>\r\n                                <th data-field='id'>Name</th>\r\n                                <th data-field='name'>Phone</th>\r\n                                <th data-field='email'>Email</th>\r\n                                <th data-field='action'>Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {contacts.map(contact => {\r\n                                return (\r\n                                    <tr key={contact._id}>\r\n                                        <td>{contact.name}</td>\r\n                                        <td>{contact.phone}</td>\r\n                                        <td>{contact.email}</td>\r\n                                        <td>\r\n                                            <a href='#'\r\n                                             style={{\r\n                                                marginRight: \"20px\",\r\n\r\n                                            }}\r\n                                            onClick={this.handleEditContact(contact)}>\r\n                                                <Icon>create</Icon>\r\n                                            </a>\r\n                                            <a\r\n                                                href='#'\r\n                                                style={{\r\n\r\n                                                    color: \"red\"\r\n                                                }}\r\n                                                onClick={this.handleRemoveContact(contact._id)}\r\n                                            >\r\n                                                <Icon>clear</Icon>\r\n                                            </a>\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </Table>\r\n                </Col>\r\n\r\n                {this.state.individualContact && <EditContactForm contact={this.state.individualContact} updateContact={this.updateContact} closeEditContact={this.handleCloseEditContact}/>}\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactTable);\r\n"]},"metadata":{},"sourceType":"module"}