{"ast":null,"code":"import _objectSpread from \"/Users/hanguyen/web-projects/crm-beeblee-node/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/hanguyen/web-projects/crm-beeblee-node/client/src/features/business/Business.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Col, Row, Table, TextInput, Select, Icon, Button } from \"react-materialize\";\nimport Loading from \"../loading/Loading\";\nimport axios from \"axios\";\nimport { fetch_province, push_business_to_modal } from \"../../redux/actions/index\";\nimport BusinessModalDetail from \"./BusinessModalDetail\";\n\nconst mapStateToProps = state => {\n  return {\n    provinces: state.provinces\n  };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    addProvinceToRedux: provinces => dispatch(fetch_province(provinces)),\n    pushBusinessToModal: business => dispatch(push_business_to_modal(business))\n  };\n}\n\nclass Business extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n    };\n\n    this.handleInputChange = e => {\n      const searchBy = _objectSpread({}, this.state.searchBy);\n\n      const field = e.target.name;\n      const value = e.target.value;\n      searchBy[field] = value;\n      this.setState(_objectSpread({}, this.state, {\n        searchBy\n      }));\n    };\n\n    this.getProvinceName = _id => {\n      const provinces = this.state.provinces;\n      const foundProvince = provinces.filter(province => province._id === _id);\n      return foundProvince[0].name;\n    };\n\n    this.handleOpenModal = business => () => {\n      this.setState({\n        business\n      });\n    };\n\n    this.state = {\n      searchBy: {\n        name: \"\",\n        phone: \"\",\n        province: \"\"\n      },\n      provinces: [],\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  includeTokenWithRequest() {\n    const token = localStorage.getItem(\"token\");\n    axios.defaults.baseURL = \"http://localhost:3000/\";\n    axios.defaults.headers.common = {\n      Authorization: `Bearer ${token}`\n    };\n  }\n\n  filterByName(searchName, array) {\n    console.log(array); // let results = array.filter(item => item.name.replace(/\\s/g, \"\").includes(searchName.replace(/\\s/g, \"\")))\n\n    return '';\n  }\n\n  getData() {\n    this.includeTokenWithRequest();\n    const provinceRequest = axios.get(`provinces`);\n    const businessRequest = axios.get(`businesses`);\n    axios.all([provinceRequest, businessRequest]).then(axios.spread((...responses) => {\n      const provinces = responses[0].data;\n      const businesses = responses[1].data;\n      this.setState({\n        provinces,\n        businesses,\n        loading: false\n      }); //Save provinces data in redux for later usage\n\n      this.props.addProvinceToRedux(provinces);\n    })).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    const _this$state$searchBy = this.state.searchBy,\n          name = _this$state$searchBy.name,\n          phone = _this$state$searchBy.phone,\n          province = _this$state$searchBy.province;\n    const _this$state = this.state,\n          loading = _this$state.loading,\n          provinces = _this$state.provinces,\n          businesses = _this$state.businesses,\n          business = _this$state.business;\n    console.log(businesses);\n    console.log(this.filterByName('Book', businesses));\n\n    if (loading) {\n      return React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Row, {\n      style: {\n        marginTop: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Businesses\"))), React.createElement(Row, {\n      style: {\n        backgroundColor: \"white\",\n        padding: \"20px\",\n        boxShadow: \"1px 1px 1px #9E9E9E\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Filter by\"), React.createElement(Col, {\n      s: 12,\n      m: 12,\n      l: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      s: 12,\n      l: 4,\n      m: 4,\n      xl: 4,\n      label: \"Name\",\n      name: \"name\",\n      value: name,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }), React.createElement(TextInput, {\n      s: 12,\n      l: 3,\n      m: 3,\n      xl: 3,\n      label: \"Phone\",\n      name: \"phone\",\n      value: phone,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(Select, {\n      onChange: this.handleInputChange,\n      options: {\n        classes: \"\",\n        dropdownOptions: {\n          alignment: \"left\",\n          autoTrigger: true,\n          closeOnClick: true,\n          constrainWidth: true,\n          container: null,\n          coverTrigger: true,\n          hover: false,\n          inDuration: 150,\n          onCloseEnd: null,\n          onCloseStart: null,\n          onOpenEnd: null,\n          onOpenStart: null,\n          outDuration: 250\n        }\n      },\n      value: province,\n      name: \"province\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      disabled: true,\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Select Province\"), provinces.map(province => {\n      return React.createElement(\"option\", {\n        className: \"black-text\",\n        key: province._id,\n        value: province._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, province.name);\n    })), React.createElement(Button, {\n      node: \"button\",\n      type: \"submit\",\n      style: {\n        marginRight: \"5px\",\n        bottom: \"-20px\",\n        marginBottom: \"20px\"\n      },\n      waves: \"light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Search\")))), React.createElement(Row, {\n      style: {\n        backgroundColor: \"white\",\n        padding: \"20px\",\n        boxShadow: \"1px 1px 1px #9E9E9E\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(Col, {\n      s: 12,\n      m: 12,\n      l: 12,\n      xl: 12,\n      style: {\n        marginTop: \"50px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      \"data-field\": \"id\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      \"data-field\": \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Phone\"), React.createElement(\"th\", {\n      \"data-field\": \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"Province\"), React.createElement(\"th\", {\n      \"data-field\": \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"Details\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, businesses.map(business => {\n      return React.createElement(\"tr\", {\n        key: business._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, business.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, business.phone), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, this.getProvinceName(business.province)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: this.handleOpenModal(business),\n        className: \"modal-trigger\",\n        href: \"#modal1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, \"launch\"))));\n    }))))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, business && React.createElement(BusinessModalDetail, {\n      business: business,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Business);","map":{"version":3,"sources":["/Users/hanguyen/web-projects/crm-beeblee-node/client/src/features/business/Business.jsx"],"names":["React","Component","connect","Col","Row","Table","TextInput","Select","Icon","Button","Loading","axios","fetch_province","push_business_to_modal","BusinessModalDetail","mapStateToProps","state","provinces","mapDispatchToProps","dispatch","addProvinceToRedux","pushBusinessToModal","business","Business","constructor","props","handleSubmit","e","preventDefault","handleInputChange","searchBy","field","target","name","value","setState","getProvinceName","_id","foundProvince","filter","province","handleOpenModal","phone","loading","componentDidMount","getData","includeTokenWithRequest","token","localStorage","getItem","defaults","baseURL","headers","common","Authorization","filterByName","searchName","array","console","log","provinceRequest","get","businessRequest","all","then","spread","responses","data","businesses","catch","error","render","marginTop","backgroundColor","padding","boxShadow","classes","dropdownOptions","alignment","autoTrigger","closeOnClick","constrainWidth","container","coverTrigger","hover","inDuration","onCloseEnd","onCloseStart","onOpenEnd","onOpenStart","outDuration","map","marginRight","bottom","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n    Col,\n    Row,\n    Table,\n    TextInput,\n    Select,\n    Icon,\n    Button\n} from \"react-materialize\";\nimport Loading from \"../loading/Loading\";\nimport axios from \"axios\";\nimport {\n    fetch_province,\n    push_business_to_modal\n} from \"../../redux/actions/index\";\nimport BusinessModalDetail from \"./BusinessModalDetail\";\n\nconst mapStateToProps = state => {\n    return { provinces: state.provinces };\n};\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        addProvinceToRedux: provinces => dispatch(fetch_province(provinces)),\n        pushBusinessToModal: business =>\n            dispatch(push_business_to_modal(business))\n    };\n}\n\nclass Business extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            searchBy: {\n                name: \"\",\n                phone: \"\",\n                province: \"\"\n            },\n            provinces: [],\n            loading: true\n        };\n    }\n\n    componentDidMount() {\n        this.getData();\n    }\n\n    includeTokenWithRequest() {\n        const token = localStorage.getItem(\"token\");\n        axios.defaults.baseURL = \"http://localhost:3000/\";\n        axios.defaults.headers.common = { Authorization: `Bearer ${token}` };\n    }\n\n    filterByName(searchName, array) {\n        console.log(array)\n        // let results = array.filter(item => item.name.replace(/\\s/g, \"\").includes(searchName.replace(/\\s/g, \"\")))\n        return '' \n    }\n\n    getData() {\n        this.includeTokenWithRequest();\n        const provinceRequest = axios.get(`provinces`);\n        const businessRequest = axios.get(`businesses`);\n\n        axios\n            .all([provinceRequest, businessRequest])\n            .then(\n                axios.spread((...responses) => {\n                    const provinces = responses[0].data;\n                    const businesses = responses[1].data;\n\n                    this.setState({\n                        provinces,\n                        businesses,\n                        loading: false\n                    });\n                    //Save provinces data in redux for later usage\n                    this.props.addProvinceToRedux(provinces);\n                })\n            )\n            .catch(error => {\n                console.log(error);\n            });\n    }\n\n    handleSubmit = e => {\n        e.preventDefault();\n    };\n\n    handleInputChange = e => {\n        const searchBy = { ...this.state.searchBy };\n\n        const field = e.target.name;\n        const value = e.target.value;\n        searchBy[field] = value;\n\n        this.setState({\n            ...this.state,\n            searchBy\n        });\n    };\n\n    getProvinceName = _id => {\n        const { provinces } = this.state;\n\n        const foundProvince = provinces.filter(\n            province => province._id === _id\n        );\n\n        return foundProvince[0].name;\n    };\n\n    handleOpenModal = business => () => {\n        this.setState({\n            business\n        });\n    };\n\n    render() {\n        const { name, phone, province } = this.state.searchBy;\n        const { loading, provinces, businesses, business } = this.state;\n        console.log(businesses)\n        console.log(this.filterByName('Book', businesses))\n        if (loading) {\n            return <Loading />;\n        }\n        return (\n            <div>\n                <Row style={{ marginTop: \"20px\" }}></Row>\n                <Row>\n                    <Col>\n                        <h5 >Businesses</h5>\n                    </Col>\n                </Row>\n                <Row\n                    style={{\n                        backgroundColor: \"white\",\n                        padding: \"20px\",\n                        boxShadow: \"1px 1px 1px #9E9E9E\"\n                    }}\n                >\n                    <form>\n                        <h6>Filter by</h6>\n                        <Col s={12} m={12} l={12} xl={12}>\n                            <TextInput\n                                s={12}\n                                l={4}\n                                m={4}\n                                xl={4}\n                                label='Name'\n                                name='name'\n                                value={name}\n                                onChange={this.handleInputChange}\n                            />\n                            <TextInput\n                                s={12}\n                                l={3}\n                                m={3}\n                                xl={3}\n                                label='Phone'\n                                name='phone'\n                                value={phone}\n                                onChange={this.handleInputChange}\n                            />\n                            <Select\n                                onChange={this.handleInputChange}\n                                options={{\n                                    classes: \"\",\n                                    dropdownOptions: {\n                                        alignment: \"left\",\n                                        autoTrigger: true,\n                                        closeOnClick: true,\n                                        constrainWidth: true,\n                                        container: null,\n                                        coverTrigger: true,\n                                        hover: false,\n                                        inDuration: 150,\n                                        onCloseEnd: null,\n                                        onCloseStart: null,\n                                        onOpenEnd: null,\n                                        onOpenStart: null,\n                                        outDuration: 250\n                                    }\n                                }}\n                                value={province}\n                                name='province'\n                            >\n                                <option disabled value=''>\n                                    Select Province\n                                </option>\n                                {provinces.map(province => {\n                                    return (\n                                        <option\n                                            className='black-text'\n                                            key={province._id}\n                                            value={province._id}\n                                        >\n                                            {province.name}\n                                        </option>\n                                    );\n                                })}\n                            </Select>\n                            <Button\n                                node='button'\n                                type='submit'\n                                style={{\n                                    marginRight: \"5px\",\n                                    bottom: \"-20px\",\n                                    marginBottom: \"20px\"\n                                }}\n                                waves='light'\n                            >\n                                Search\n                            </Button>\n                        </Col>\n                    </form>\n                </Row>\n                <Row\n                    style={{\n                        backgroundColor: \"white\",\n                        padding: \"20px\",\n                        boxShadow: \"1px 1px 1px #9E9E9E\"\n                    }}\n                >\n                    <Col\n                        s={12}\n                        m={12}\n                        l={12}\n                        xl={12}\n                        style={{ marginTop: \"50px\" }}\n                    >\n                        <Table>\n                            <thead>\n                                <tr>\n                                    <th data-field='id'>Name</th>\n                                    <th data-field='price'>Phone</th>\n                                    <th data-field='price'>Province</th>\n                                    <th data-field='price'>Details</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {businesses.map(business => {\n                                    return (\n                                        <tr key={business._id}>\n                                            <td>{business.name}</td>\n                                            <td>{business.phone}</td>\n                                            <td>\n                                                {this.getProvinceName(\n                                                    business.province\n                                                )}\n                                            </td>\n                                            <td>\n                                                <a\n                                                    onClick={this.handleOpenModal(\n                                                        business\n                                                    )}\n                                                    className='modal-trigger'\n                                                    href='#modal1'\n                                                >\n                                                    <Icon>launch</Icon>\n                                                </a>\n                                            </td>\n                                        </tr>\n                                    );\n                                })}\n                            </tbody>\n                        </Table>\n                    </Col>\n                </Row>\n\n                <div>\n                    {business && <BusinessModalDetail business={business} />}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Business);\n"]},"metadata":{},"sourceType":"module"}