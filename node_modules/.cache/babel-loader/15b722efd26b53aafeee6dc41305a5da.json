{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Modal,Button,Row,TextInput}from\"react-materialize\";import formatPhone from\"../../utils/commons/FormatPhone\";import ProvinceDropdown from\"../common/ProvinceDropdown\";import API from\"../../utils/API/API\";function mapStateToProps(state){return{};}//Take 2 props:\n// Business object to display\n//and updateData() function to update data in the parent component\n//If Business object is empty, then create a new one\nvar BusinessForm=/*#__PURE__*/function(_Component){_inherits(BusinessForm,_Component);function BusinessForm(){var _getPrototypeOf2;var _this;_classCallCheck(this,BusinessForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BusinessForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={business:{name:\"\",address:\"\",phone:\"\",province:\"\"},edited:false,successMessage:\"\",errorMessage:\"\"};_this.handleChange=function(e){var field=e.target.name;var value=e.target.value;if(field===\"phone\"){value=formatPhone(value);}var business=_this.state.business;business[field]=value;_this.setState({business:business,edited:true});};_this.createBusinessAPI=function(business){API.post(\"businesses\",business).then(function(response){_this.props.updateData();_this.props.closeCreateModal();}).catch(function(error){console.log(error);});};_this.updateBusinessAPI=function(business){var _id=business._id;var updateBusiness={name:business.name,phone:business.phone,address:business.address,province:business.province};API.patch(\"businesses/\".concat(_id),updateBusiness).then(function(response){//Update the data in the parent component\n_this.props.updateData();_this.setState(_objectSpread({},_this.state,{successMessage:\"Save successfully!\",errorMessage:\"\",loading:false,edited:false}));}).catch(function(error){_this.setState(_objectSpread({},_this.state,{successMessage:\"\",errorMessage:\"Cannot save the data!\",loading:false,edited:false}));});};_this.handleSubmit=function(e){e.preventDefault();var business=_this.state.business;_this.setState(_objectSpread({},_this.state,{successMessage:\"\",errorMessage:\"\",loading:true,edited:false}));//Check _id propery to decide to create or update\nif(!business._id){_this.createBusinessAPI(business);}else{_this.updateBusinessAPI(business);}};return _this;}_createClass(BusinessForm,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.business){this.setState({business:this.props.business});}}},{key:\"render\",value:function render(){var _this$state=this.state,business=_this$state.business,edited=_this$state.edited;return React.createElement(\"div\",null,React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(Row,{className:\"\"},React.createElement(TextInput,{s:12,l:6,m:6,xl:6,label:\"Name:\",name:\"name\",value:business.name,onChange:this.handleChange,required:true}),React.createElement(TextInput,{s:12,l:6,m:6,xl:6,label:\"Address\",name:\"address\",value:business.address,onChange:this.handleChange,required:true}),React.createElement(TextInput,{s:12,l:6,m:6,xl:6,label:\"Phone:\",name:\"phone\",value:business.phone,onChange:this.handleChange,required:true}),React.createElement(ProvinceDropdown,{handleChange:this.handleChange,province:business.province})),React.createElement(Row,null,React.createElement(Button,{node:\"button\",className:edited?\"gradient-btn btn-green\":\"\",waves:\"green\",disabled:!edited},\"Save\"))),React.createElement(Row,null,this.state.successMessage&&React.createElement(Row,{className:\"animated shake\"},React.createElement(\"p\",{className:\"green-text animated bounceOutLeft delay-3s\"},this.state.successMessage)),this.state.errorMessage&&React.createElement(Row,{className:\"animated rubberBand\"},React.createElement(\"p\",{className:\"red-text animated bounceOutLeft delay-3s \"},this.state.errorMessage))));}}]);return BusinessForm;}(Component);export default connect(mapStateToProps)(BusinessForm);","map":{"version":3,"sources":["C:/xampp/htdocs/beeblee-crm-client/src/features/business/BusinessForm.jsx"],"names":["React","Component","connect","Modal","Button","Row","TextInput","formatPhone","ProvinceDropdown","API","mapStateToProps","state","BusinessForm","business","name","address","phone","province","edited","successMessage","errorMessage","handleChange","e","field","target","value","setState","createBusinessAPI","post","then","response","props","updateData","closeCreateModal","catch","error","console","log","updateBusinessAPI","_id","updateBusiness","patch","loading","handleSubmit","preventDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Row, TextInput } from \"react-materialize\";\r\nimport formatPhone from \"../../utils/commons/FormatPhone\";\r\nimport ProvinceDropdown from \"../common/ProvinceDropdown\";\r\nimport API from \"../../utils/API/API\";\r\n\r\nfunction mapStateToProps(state) {\r\n  return {};\r\n}\r\n\r\n//Take 2 props:\r\n// Business object to display\r\n//and updateData() function to update data in the parent component\r\n//If Business object is empty, then create a new one\r\nclass BusinessForm extends Component {\r\n  state = {\r\n    business: { name: \"\", address: \"\", phone: \"\", province: \"\" },\r\n    edited: false,\r\n    successMessage: \"\",\r\n    errorMessage:\"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.business) {\r\n      this.setState({\r\n        business: this.props.business\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChange = e => {\r\n    const field = e.target.name;\r\n    let value = e.target.value;\r\n\r\n    if (field === \"phone\") {\r\n      value = formatPhone(value);\r\n    }\r\n\r\n    let business = this.state.business;\r\n    business[field] = value;\r\n    this.setState({\r\n      business,\r\n      edited: true\r\n    });\r\n  };\r\n\r\n  //Create a business\r\n  //Will be called when _id property of business is not present\r\n  createBusinessAPI = (business) => {\r\n    API.post(`businesses`, business)\r\n    .then(response => {\r\n        this.props.updateData();\r\n        this.props.closeCreateModal();\r\n\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  //Update business API\r\n  //Will be called when business has _id property\r\n  updateBusinessAPI = (business) => {\r\n    const _id = business._id;\r\n    const updateBusiness = {\r\n      name: business.name,\r\n      phone: business.phone,\r\n      address: business.address,\r\n      province: business.province\r\n    };\r\n    API.patch(`businesses/${_id}`, updateBusiness)\r\n    .then(response => {\r\n      //Update the data in the parent component\r\n      this.props.updateData();\r\n      this.setState({\r\n        ...this.state,\r\n        successMessage: \"Save successfully!\",\r\n        errorMessage: \"\",\r\n        loading: false,\r\n        edited: false\r\n      });\r\n    })\r\n    .catch(error => {\r\n      this.setState({\r\n        ...this.state,\r\n        successMessage:\"\",\r\n        errorMessage: \"Cannot save the data!\",\r\n        loading: false,\r\n        edited: false\r\n      });\r\n    });\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    let { business } = this.state;\r\n    this.setState({\r\n      ...this.state,\r\n      successMessage: \"\",\r\n      errorMessage: \"\",\r\n      loading: true,\r\n      edited: false\r\n    })\r\n    //Check _id propery to decide to create or update\r\n    if (!business._id) {\r\n      this.createBusinessAPI(business)\r\n    } else {\r\n      this.updateBusinessAPI(business)\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { business, edited } = this.state;\r\n    return (\r\n      <div>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <Row className=\"\">\r\n            <TextInput\r\n              s={12}\r\n              l={6}\r\n              m={6}\r\n              xl={6}\r\n              label=\"Name:\"\r\n              name=\"name\"\r\n              value={business.name}\r\n              onChange={this.handleChange}\r\n              required\r\n            />\r\n            <TextInput\r\n              s={12}\r\n              l={6}\r\n              m={6}\r\n              xl={6}\r\n              label=\"Address\"\r\n              name=\"address\"\r\n              value={business.address}\r\n              onChange={this.handleChange}\r\n              required\r\n            />\r\n            <TextInput\r\n              s={12}\r\n              l={6}\r\n              m={6}\r\n              xl={6}\r\n              label=\"Phone:\"\r\n              name=\"phone\"\r\n              value={business.phone}\r\n              onChange={this.handleChange}\r\n              required\r\n            />\r\n            <ProvinceDropdown\r\n              handleChange={this.handleChange}\r\n              province={business.province}\r\n            />\r\n          </Row>\r\n          <Row>\r\n            <Button\r\n              node=\"button\"\r\n              className={edited ? \"gradient-btn btn-green\" : \"\"}\r\n              waves=\"green\"\r\n              disabled={!edited}\r\n            >\r\n              Save\r\n            </Button>\r\n          </Row>\r\n        </form>\r\n        <Row>\r\n          {this.state.successMessage && (\r\n            <Row className=\"animated shake\">\r\n              <p className=\"green-text animated bounceOutLeft delay-3s\">\r\n                {this.state.successMessage}\r\n              </p>\r\n            </Row>\r\n          )}\r\n          {this.state.errorMessage && (\r\n            <Row className=\"animated rubberBand\">\r\n              <p className=\"red-text animated bounceOutLeft delay-3s \">\r\n                {this.state.errorMessage}\r\n              </p>\r\n            </Row>\r\n          )}\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(BusinessForm);\r\n"]},"metadata":{},"sourceType":"module"}