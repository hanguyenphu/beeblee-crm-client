{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Row,Col,TextInput,Button,Icon}from\"react-materialize\";import{connect}from\"react-redux\";import Loading from\"../loading/Loading\";import axios from\"axios\";import{update_profile as _update_profile}from\"../../redux/actions/index\";import API from\"../../utils/API/API\";import formatPhone from\"../../utils/commons/FormatPhone\";var mapStateToProps=function mapStateToProps(state){return{user:state.user};};function mapDispatchToProps(dispatch){return{update_profile:function update_profile(newProfile){return dispatch(_update_profile(newProfile));}};}var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_possibleConstructorReturn(this,_getPrototypeOf(Profile).call(this,props));_this.handleInputChange=function(e){var user=_objectSpread({},_this.state.user);var field=e.target.name;var newValue=e.target.value;if(field===\"phone\"){newValue=formatPhone(newValue);}user[field]=newValue;_this.setState({user:user,edited:true});};_this.handlePasswordInputChange=function(e){var field=e.target.name;var newValue=e.target.value;_this.setState(_defineProperty({},field,newValue));};_this.handleSubmitNewPassword=function(e){e.preventDefault();var _this$state=_this.state,currentPassword=_this$state.currentPassword,newPassword=_this$state.newPassword,repeatPassword=_this$state.repeatPassword;_this.setState({errMessage:\"\",sussess:false});if(newPassword!==repeatPassword){_this.setState({errMessage:\"Passwords do not match!\"});}else{var data={currentPassword:currentPassword,newPassword:newPassword};API.patch(\"/users/update/password\",{data:data}).then(function(response){_this.setState({sussess:true,currentPassword:\"\",newPassword:\"\",repeatPassword:\"\"});}).catch(function(error){{_this.setState({errMessage:\"Incorrect Current Password or some errors have been occurred\"});}});}};_this.handleSubmit=function(e){e.preventDefault();var data=_this.state.user;_this.setState({errMessage:\"\",sussess:false,edited:false});//get the token for verifying request\n// this.includeTokenWithRequest();\nAPI.patch(\"users/update/profile\",{data:data}).then(function(response){var user=response.data;_this.props.update_profile(user);_this.setState({sussess:true});}).catch(function(error){console.log(error);_this.setState({errMessage:\"Some errors has been occurred!\"});});};_this.state={user:{name:\"\",email:\"\",phone:\"\"},currentPassword:\"\",newPassword:\"\",repeatPassword:\"\",errMessage:\"\",sussess:false,edited:false};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var user=this.props.user;this.setState(function(prevState){return _objectSpread({},prevState,{user:_objectSpread({},_this2.state.user,{email:user.email,name:user.name,phone:user.phone})});});}},{key:\"render\",value:function render(){if(!this.state.user){return React.createElement(Loading,null);}var _this$state2=this.state,user=_this$state2.user,currentPassword=_this$state2.currentPassword,newPassword=_this$state2.newPassword,repeatPassword=_this$state2.repeatPassword,errMessage=_this$state2.errMessage,sussess=_this$state2.sussess,edited=_this$state2.edited;return React.createElement(\"div\",null,React.createElement(\"form\",{className:\"radius-corner\",onSubmit:this.handleSubmit,style:{backgroundColor:\"white\",marginTop:\"30px\",padding:\"30px\",boxShadow:\"1px 1px 1px #9E9E9E\",marginBottom:\"20px\"}},React.createElement(\"h6\",null,\"User Profile\"),sussess&&React.createElement(Row,null,React.createElement(Col,{s:12,m:6,l:6,xl:6},React.createElement(\"p\",{className:\"green-text animated bounceInRigh\"},\"Update Sussessfully\",\" \"))),errMessage&&React.createElement(Row,null,React.createElement(Col,{s:12,m:6,l:6,xl:6},React.createElement(\"p\",{className:\" deep-orange-text animated shake \"},errMessage||\"\"))),React.createElement(Row,{className:\"animated bounceInRigh\"},React.createElement(Col,{s:12,m:6,l:6,xl:6},React.createElement(TextInput,{s:12,l:12,m:12,label:\"Name\",value:user.name,name:\"name\",onChange:this.handleInputChange})),React.createElement(Col,{s:12,m:6,l:6,xl:6},React.createElement(TextInput,{email:true,validate:true,disabled:true,s:12,l:12,m:12,label:\"Email\",value:user.email,readOnly:true})),React.createElement(Col,{s:12,m:6,l:6,xl:6},React.createElement(TextInput,{s:12,l:12,m:12,label:\"Phone\",name:\"phone\",value:user.phone,onChange:this.handleInputChange}))),React.createElement(Row,null,React.createElement(Button,{node:\"button\",type:\"submit\",waves:\"light\",className:edited?\"gradient-btn btn-blue\":\"\",disabled:!edited},\"Save\",React.createElement(Icon,{right:true},\"send\")))),React.createElement(\"form\",{className:\"radius-corner\",onSubmit:this.handleSubmitNewPassword,style:{backgroundColor:\"white\",padding:\"30px\",boxShadow:\"1px 1px 1px #9E9E9E\"}},React.createElement(Row,null,React.createElement(\"h6\",null,\"Change Password\"),React.createElement(Col,{s:12,m:12,l:12,xl:12},React.createElement(TextInput,{password:true,required:true,s:12,l:12,m:12,label:\"Current Password\",name:\"currentPassword\",value:currentPassword,onChange:this.handlePasswordInputChange})),React.createElement(Col,{s:12,m:6,l:6,xl:6},React.createElement(TextInput,{password:true,required:true,s:12,l:12,m:12,label:\"New Password\",name:\"newPassword\",value:newPassword,onChange:this.handlePasswordInputChange})),React.createElement(Col,{s:12,m:6,l:6,xl:6},React.createElement(TextInput,{password:true,required:true,s:12,l:12,m:12,label:\"Repeat Password\",name:\"repeatPassword\",value:repeatPassword,onChange:this.handlePasswordInputChange}))),React.createElement(Row,null,React.createElement(Button,{node:\"button\",type:\"submit\",waves:\"light\",className:\"gradient-btn btn-green\"},\"Change Password\",React.createElement(Icon,{right:true},\"lock\")))));}}]);return Profile;}(Component);export default connect(mapStateToProps,mapDispatchToProps)(Profile);","map":{"version":3,"sources":["C:/xampp/htdocs/beeblee-crm-client/src/features/profile/Profile.jsx"],"names":["React","Component","Row","Col","TextInput","Button","Icon","connect","Loading","axios","update_profile","API","formatPhone","mapStateToProps","state","user","mapDispatchToProps","dispatch","newProfile","Profile","props","handleInputChange","e","field","target","name","newValue","value","setState","edited","handlePasswordInputChange","handleSubmitNewPassword","preventDefault","currentPassword","newPassword","repeatPassword","errMessage","sussess","data","patch","then","response","catch","error","handleSubmit","console","log","email","phone","prevState","backgroundColor","marginTop","padding","boxShadow","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Col, TextInput, Button, Icon } from \"react-materialize\";\r\nimport { connect } from \"react-redux\";\r\nimport Loading from \"../loading/Loading\";\r\nimport axios from \"axios\";\r\nimport { update_profile } from \"../../redux/actions/index\";\r\nimport API from \"../../utils/API/API\";\r\nimport formatPhone from \"../../utils/commons/FormatPhone\";\r\n\r\nconst mapStateToProps = state => {\r\n    return { user: state.user };\r\n};\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        update_profile: newProfile => dispatch(update_profile(newProfile))\r\n    };\r\n}\r\n\r\nclass Profile extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: {\r\n                name: \"\",\r\n                email: \"\",\r\n                phone: \"\"\r\n            },\r\n            currentPassword: \"\",\r\n            newPassword: \"\",\r\n            repeatPassword: \"\",\r\n            errMessage: \"\",\r\n            sussess: false,\r\n            edited: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const user = this.props.user;\r\n        this.setState(prevState => ({\r\n            ...prevState,\r\n            user: {\r\n                ...this.state.user,\r\n                email: user.email,\r\n                name: user.name,\r\n                phone: user.phone,\r\n\r\n            }\r\n        }));\r\n    }\r\n\r\n    handleInputChange = e => {\r\n        const user = { ...this.state.user };\r\n        const field = e.target.name;\r\n        let newValue = e.target.value;\r\n        if (field === \"phone\") {\r\n            newValue = formatPhone(newValue);\r\n        }\r\n        user[field] = newValue;\r\n        this.setState({ user, edited: true });\r\n    };\r\n\r\n    handlePasswordInputChange = e => {\r\n        const field = e.target.name;\r\n        const newValue = e.target.value;\r\n        this.setState({\r\n            [field]: newValue\r\n        });\r\n    };\r\n\r\n    handleSubmitNewPassword = e => {\r\n        e.preventDefault();\r\n        const { currentPassword, newPassword, repeatPassword } = this.state;\r\n\r\n        this.setState({\r\n            errMessage: \"\",\r\n            sussess: false\r\n        });\r\n        if (newPassword !== repeatPassword) {\r\n            this.setState({\r\n                errMessage: \"Passwords do not match!\"\r\n            });\r\n        } else {\r\n            const data = { currentPassword, newPassword };\r\n\r\n            API.patch(`/users/update/password`, {\r\n                data\r\n            })\r\n                .then(response => {\r\n                    this.setState({\r\n                        sussess: true,\r\n                        currentPassword: \"\",\r\n                        newPassword: \"\",\r\n                        repeatPassword: \"\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    {\r\n                        this.setState({\r\n                            errMessage:\r\n                                \"Incorrect Current Password or some errors have been occurred\"\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const data = this.state.user;\r\n        this.setState({\r\n            errMessage: \"\",\r\n            sussess: false,\r\n            edited: false,\r\n        });\r\n\r\n        //get the token for verifying request\r\n        // this.includeTokenWithRequest();\r\n\r\n        API.patch(`users/update/profile`, {\r\n            data\r\n        })\r\n            .then(response => {\r\n                const user = response.data;\r\n                this.props.update_profile(user);\r\n                this.setState({\r\n                    sussess: true\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                this.setState({\r\n                    errMessage: \"Some errors has been occurred!\"\r\n                });\r\n            });\r\n    };\r\n\r\n    render() {\r\n        if (!this.state.user) {\r\n            return <Loading />;\r\n        }\r\n        const {\r\n            user,\r\n            currentPassword,\r\n            newPassword,\r\n            repeatPassword,\r\n            errMessage,\r\n            sussess,\r\n            edited\r\n        } = this.state;\r\n\r\n        return (\r\n            <div >\r\n                <form className=\"radius-corner\"\r\n                    onSubmit={this.handleSubmit}\r\n                    style={{\r\n                        backgroundColor: \"white\",\r\n                        marginTop: \"30px\",\r\n                        padding: \"30px\",\r\n                        boxShadow: \"1px 1px 1px #9E9E9E\",\r\n                        marginBottom: \"20px\"\r\n                    }}\r\n                >\r\n                    <h6 >User Profile</h6>\r\n\r\n                    {sussess && (\r\n                        <Row >\r\n                            <Col s={12} m={6} l={6} xl={6}>\r\n                                <p className='green-text animated bounceInRigh'>\r\n                                    Update Sussessfully{\" \"}\r\n                                </p>\r\n                            </Col>\r\n                        </Row>\r\n                    )}\r\n\r\n                    {errMessage && (\r\n                        <Row>\r\n                            <Col s={12} m={6} l={6} xl={6}>\r\n                                <p className=' deep-orange-text animated shake '>\r\n                                    {errMessage || \"\"}\r\n                                </p>\r\n                            </Col>\r\n                        </Row>\r\n                    )}\r\n                    <Row className=\"animated bounceInRigh\">\r\n                        <Col s={12} m={6} l={6} xl={6}>\r\n                            <TextInput\r\n                                s={12}\r\n                                l={12}\r\n                                m={12}\r\n                                label='Name'\r\n                                value={user.name}\r\n                                name='name'\r\n                                onChange={this.handleInputChange}\r\n                            />\r\n                        </Col>\r\n                        <Col s={12} m={6} l={6} xl={6}>\r\n                            <TextInput\r\n                                email\r\n                                validate\r\n                                disabled\r\n                                s={12}\r\n                                l={12}\r\n                                m={12}\r\n                                label='Email'\r\n                                value={user.email}\r\n                                readOnly\r\n                            />\r\n                        </Col>\r\n                        <Col s={12} m={6} l={6} xl={6}>\r\n                            <TextInput\r\n                                s={12}\r\n                                l={12}\r\n                                m={12}\r\n                                label='Phone'\r\n                                name='phone'\r\n                                value={user.phone}\r\n                                onChange={this.handleInputChange}\r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <Row>\r\n                        <Button node='button' type='submit' waves='light' className={edited ?\"gradient-btn btn-blue\": \"\"} disabled={!edited}>\r\n                            Save\r\n                            <Icon right>send</Icon>\r\n                        </Button>\r\n                    </Row>\r\n                </form>\r\n                <form className=\"radius-corner\"\r\n                    onSubmit={this.handleSubmitNewPassword}\r\n                    style={{\r\n                        backgroundColor: \"white\",\r\n                        padding: \"30px\",\r\n                        boxShadow: \"1px 1px 1px #9E9E9E\"\r\n                    }}\r\n                >\r\n                    <Row>\r\n                        <h6>Change Password</h6>\r\n                        <Col s={12} m={12} l={12} xl={12}>\r\n                            <TextInput\r\n                                password\r\n                                required\r\n                                s={12}\r\n                                l={12}\r\n                                m={12}\r\n                                label='Current Password'\r\n                                name='currentPassword'\r\n                                value={currentPassword}\r\n                                onChange={this.handlePasswordInputChange}\r\n                            />\r\n                        </Col>\r\n                        <Col s={12} m={6} l={6} xl={6}>\r\n                            <TextInput\r\n                                password\r\n                                required\r\n                                s={12}\r\n                                l={12}\r\n                                m={12}\r\n                                label='New Password'\r\n                                name='newPassword'\r\n                                value={newPassword}\r\n                                onChange={this.handlePasswordInputChange}\r\n                            />\r\n                        </Col>\r\n                        <Col s={12} m={6} l={6} xl={6}>\r\n                            <TextInput\r\n                                password\r\n                                required\r\n                                s={12}\r\n                                l={12}\r\n                                m={12}\r\n                                label='Repeat Password'\r\n                                name='repeatPassword'\r\n                                value={repeatPassword}\r\n                                onChange={this.handlePasswordInputChange}\r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <Row>\r\n                        <Button node='button' type='submit' waves='light' className= \"gradient-btn btn-green\">\r\n                            Change Password\r\n                            <Icon right>lock</Icon>\r\n                        </Button>\r\n                    </Row>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\r\n"]},"metadata":{},"sourceType":"module"}