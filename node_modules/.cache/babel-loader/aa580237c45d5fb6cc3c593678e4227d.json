{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Table,Icon}from\"react-materialize\";import API from\"../../../utils/API/API\";import EditContributorsModal from\"./EditContributorsModal\";import Axios from\"axios\";import Loading from\"../../loading/Loading\";function mapStateToProps(state){return{};}var ProjectTableAdmin=/*#__PURE__*/function(_Component){_inherits(ProjectTableAdmin,_Component);function ProjectTableAdmin(){var _getPrototypeOf2;var _this;_classCallCheck(this,ProjectTableAdmin);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ProjectTableAdmin)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loading:true,projects:[],statuses:[],opendEditContributorsModal:false,users:[]};_this.getData=function(){var getStatusesRequest=API.get(\"/statuses\");var getUsersRequest=API.get(\"/admin/users\");Axios.all([getStatusesRequest,getUsersRequest]).then(Axios.spread(function(){for(var _len2=arguments.length,responses=new Array(_len2),_key2=0;_key2<_len2;_key2++){responses[_key2]=arguments[_key2];}var statuses=responses[0].data;var users=responses[1].data;_this.setState({statuses:statuses,users:users,loading:false});})).catch(function(error){_this.setState(_objectSpread({},_this.state,{loading:false}));console.log(error);});};_this.openEditContributorModal=function(project){return function(){_this.setState({opendEditContributorsModal:true,project:project});};};_this.closeEditContributorsModal=function(e){_this.setState({opendEditContributorsModal:false});};_this.displayContributor=function(project){var users=_this.state.users;var contributors=users.filter(function(user){return project.contributors.includes(user._id);});return contributors.length>0&&contributors.map(function(contributor){return React.createElement(\"li\",{key:contributor._id},contributor.name);});};_this.displayProjects=function(projects){var statuses=_this.state.statuses;return projects.map(function(project){var status=statuses.filter(function(status){return status._id===project.status;})[0];return React.createElement(\"tr\",{key:project._id},React.createElement(\"td\",null,React.createElement(\"a\",{href:\"/projects/\"+project._id},project.name)),React.createElement(\"td\",null,project.price.$numberDecimal),React.createElement(\"td\",null,status&&React.createElement(\"p\",{style:{color:\"\".concat(status.color)}},status.title)),React.createElement(\"td\",null,React.createElement(\"ul\",null,_this.displayContributor(project))),React.createElement(\"td\",null,React.createElement(\"a\",{href:\"#\",onClick:_this.openEditContributorModal(project)},React.createElement(Icon,null,\"edit\"))));});};return _this;}_createClass(ProjectTableAdmin,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.projects){this.setState(_objectSpread({},this.state,{projects:this.props.projects,loading:false}));}this.getData();}},{key:\"render\",value:function render(){var projects=this.props.projects;var _this$state=this.state,project=_this$state.project,opendEditContributorsModal=_this$state.opendEditContributorsModal,loading=_this$state.loading;if(loading){return React.createElement(Loading,null);}return React.createElement(\"div\",null,React.createElement(Table,null,React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{\"data-field\":\"name\"},\"Name\"),React.createElement(\"th\",{\"data-field\":\"price\"},\"Price\"),React.createElement(\"th\",{\"data-field\":\"status\"},\"Status\"),React.createElement(\"th\",{\"data-field\":\"contributors\"},\"Contributors\"),React.createElement(\"th\",{\"data-field\":\"edit\"},\"Edit\"))),React.createElement(\"tbody\",null,projects.length>0?this.displayProjects(projects):React.createElement(\"tr\",null,React.createElement(\"td\",null,\"There is no project found!\")))),opendEditContributorsModal&&React.createElement(EditContributorsModal,{project:project,closeEditContributorsModal:this.closeEditContributorsModal,updateData:this.props.updateData}));}}]);return ProjectTableAdmin;}(Component);export default connect(mapStateToProps)(ProjectTableAdmin);","map":{"version":3,"sources":["C:/xampp/htdocs/beeblee-crm-client/src/features/admin/project/ProjectTableAdmin.jsx"],"names":["React","Component","connect","Table","Icon","API","EditContributorsModal","Axios","Loading","mapStateToProps","state","ProjectTableAdmin","loading","projects","statuses","opendEditContributorsModal","users","getData","getStatusesRequest","get","getUsersRequest","all","then","spread","responses","data","setState","catch","error","console","log","openEditContributorModal","project","closeEditContributorsModal","e","displayContributor","contributors","filter","user","includes","_id","length","map","contributor","name","displayProjects","status","price","$numberDecimal","color","title","props","updateData"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Table, Icon } from \"react-materialize\";\r\nimport API from \"../../../utils/API/API\";\r\nimport EditContributorsModal from \"./EditContributorsModal\";\r\nimport Axios from \"axios\";\r\nimport Loading from \"../../loading/Loading\";\r\nfunction mapStateToProps(state) {\r\n  return {};\r\n}\r\n\r\nclass ProjectTableAdmin extends Component {\r\n  state = {\r\n    loading: true,\r\n    projects: [],\r\n    statuses: [],\r\n    opendEditContributorsModal: false,\r\n    users: []\r\n  };\r\n  componentDidMount() {\r\n    if (this.props.projects) {\r\n      this.setState({\r\n        ...this.state,\r\n        projects: this.props.projects,\r\n        loading: false\r\n      });\r\n    }\r\n\r\n    this.getData();\r\n  }\r\n\r\n  getData = () => {\r\n    const getStatusesRequest = API.get(\"/statuses\");\r\n    const getUsersRequest = API.get(`/admin/users`);\r\n    Axios.all([getStatusesRequest, getUsersRequest])\r\n      .then(\r\n        Axios.spread((...responses) => {\r\n          const statuses = responses[0].data;\r\n          const users = responses[1].data;\r\n          this.setState({\r\n            statuses,\r\n            users,\r\n            loading: false\r\n          });\r\n        })\r\n      )\r\n      .catch(error => {\r\n        this.setState({\r\n          ...this.state,\r\n          loading: false\r\n        });\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  openEditContributorModal = project => () => {\r\n    this.setState({\r\n      opendEditContributorsModal: true,\r\n      project\r\n    });\r\n  };\r\n\r\n  closeEditContributorsModal = e => {\r\n    this.setState({\r\n      opendEditContributorsModal: false\r\n    });\r\n  };\r\n\r\n  displayContributor = project => {\r\n    const { users } = this.state;\r\n    const contributors = users.filter(user =>\r\n      project.contributors.includes(user._id)\r\n    );\r\n\r\n    return (\r\n      contributors.length > 0 &&\r\n      contributors.map(contributor => {\r\n        return <li key={contributor._id}>{contributor.name}</li>;\r\n      })\r\n    );\r\n  };\r\n\r\n  displayProjects = projects => {\r\n    const { statuses } = this.state;\r\n    return projects.map(project => {\r\n      const status = statuses.filter(\r\n        status => status._id === project.status\r\n      )[0];\r\n\r\n      return (\r\n        <tr key={project._id}>\r\n          <td>\r\n            <a href={\"/projects/\" + project._id}>{project.name}</a>\r\n          </td>\r\n          <td>{project.price.$numberDecimal}</td>\r\n          <td>\r\n            {status && (\r\n              <p style={{ color: `${status.color}` }}>{status.title}</p>\r\n            )}\r\n          </td>\r\n          <td>\r\n            <ul>{this.displayContributor(project)}</ul>\r\n          </td>\r\n          <td>\r\n            <a href=\"#\" onClick={this.openEditContributorModal(project)}>\r\n              <Icon>edit</Icon>\r\n            </a>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  };\r\n  render() {\r\n    const { projects } = this.props;\r\n    const { project, opendEditContributorsModal, loading } = this.state;\r\n    if (loading) {\r\n      return <Loading />;\r\n    }\r\n    return (\r\n      <div>\r\n        <Table>\r\n          <thead>\r\n            <tr>\r\n              <th data-field=\"name\">Name</th>\r\n              <th data-field=\"price\">Price</th>\r\n              <th data-field=\"status\">Status</th>\r\n              <th data-field=\"contributors\">Contributors</th>\r\n              <th data-field=\"edit\">Edit</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {projects.length > 0 ? (\r\n              this.displayProjects(projects)\r\n            ) : (\r\n              <tr>\r\n                <td>There is no project found!</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </Table>\r\n        {opendEditContributorsModal && (\r\n          <EditContributorsModal\r\n            project={project}\r\n            closeEditContributorsModal={this.closeEditContributorsModal}\r\n            updateData={this.props.updateData}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ProjectTableAdmin);\r\n"]},"metadata":{},"sourceType":"module"}