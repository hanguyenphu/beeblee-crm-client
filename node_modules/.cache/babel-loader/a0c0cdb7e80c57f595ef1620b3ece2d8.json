{"ast":null,"code":"import _objectSpread from \"/Users/hanguyen/web-projects/crm-beeblee-node/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/hanguyen/web-projects/crm-beeblee-node/client/src/features/business/BusinessModalDetail.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Modal, Button, Row, Col, TextInput, Select, Table, Icon } from \"react-materialize\";\nimport Loading from \"../loading/Loading\";\nimport axios from \"axios\";\nimport ContactForm from \"../contact/ContactForm\";\nimport { EEXIST } from \"constants\";\n\nclass BusinessModalDetail extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeBusiness = e => {\n      const field = e.target.name;\n      const value = e.target.value;\n      let business = this.state.business;\n      business[field] = value;\n      this.setState(_objectSpread({}, this.state, {\n        business\n      }));\n    };\n\n    this.updateBusiness = e => {\n      e.preventDefault();\n      const _id = this.state.business._id;\n      const business = {\n        name: this.state.business.name,\n        phone: this.state.business.phone,\n        address: this.state.business.address,\n        province: this.state.business.province\n      };\n      this.setState({\n        errorMessage: '',\n        successMessage: '',\n        loading: true\n      });\n      axios.patch(`businesses/${_id}`, business).then(response => {\n        //Update the data in the parent component\n        this.props.updateData();\n        this.setState(_objectSpread({}, this.state, {\n          successMessage: 'Save successfully!',\n          loading: false\n        }));\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this.setState({\n      business: this.props.business\n    });\n    this.getBusinessDetail(this.props.business._id);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.business._id !== this.props.business._id) {\n      this.getBusinessDetail(this.props.business._id);\n      this.setState({\n        business: this.props.business,\n        errorMessage: '',\n        successMessage: ''\n      });\n    }\n  }\n\n  getBusinessDetail(id) {\n    this.setState(_objectSpread({}, this.state, {\n      loading: true\n    }));\n    axios.get(`businesses/${id}`).then(response => {\n      if (response.data.businesses) {\n        this.setState(_objectSpread({}, this.state, {\n          contacts: response.data.businesses.contacts,\n          province: response.data.businesses.province,\n          loading: false\n        }));\n      }\n    }).catch(err => {\n      this.setState({\n        loading: false\n      });\n    });\n  }\n\n  displayProvince(_id) {\n    const provinces = this.props.provinces;\n    const province = provinces.filter(province => province._id === _id)[0];\n    return React.createElement(Select, {\n      options: {\n        classes: \"\",\n        dropdownOptions: {\n          alignment: \"left\",\n          autoTrigger: true,\n          closeOnClick: true,\n          constrainWidth: true,\n          container: null,\n          coverTrigger: true,\n          hover: false,\n          inDuration: 150,\n          onCloseEnd: null,\n          onCloseStart: null,\n          onOpenEnd: null,\n          onOpenStart: null,\n          outDuration: 250\n        }\n      },\n      onChange: this.handleChangeBusiness,\n      value: province._id,\n      name: \"province\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      disabled: true,\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Select Province\"), provinces.map(province => {\n      return React.createElement(\"option\", {\n        className: \"black-text\",\n        key: province._id,\n        value: province._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, province.name);\n    }));\n  }\n\n  render() {\n    const contacts = this.state.contacts || [];\n\n    if (!this.state.business) {\n      return React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      });\n    }\n\n    const business = this.state.business;\n    return React.createElement(Modal, {\n      actions: [React.createElement(Button, {\n        flat: true,\n        modal: \"close\",\n        node: \"button\",\n        waves: \"green\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Close\")],\n      open: true,\n      style: {\n        boder: \"none\"\n      },\n      bottomSheet: false,\n      fixedFooter: false,\n      header: \"Business Detail\",\n      id: \"modal1\",\n      required: true,\n      options: {\n        dismissible: true,\n        endingTop: \"10%\",\n        inDuration: 250,\n        onCloseEnd: null,\n        onCloseStart: null,\n        onOpenEnd: null,\n        onOpenStart: null,\n        opacity: 0.5,\n        outDuration: 250,\n        preventScrolling: true,\n        startingTop: \"4%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, !this.state.loading ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.updateBusiness,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      s: 12,\n      l: 6,\n      m: 6,\n      xl: 6,\n      label: \"Name:\",\n      value: business.name,\n      name: \"name\",\n      onChange: this.handleChangeBusiness,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), React.createElement(TextInput, {\n      s: 12,\n      l: 6,\n      m: 6,\n      xl: 6,\n      label: \"Address\",\n      name: \"address\",\n      value: business.address,\n      onChange: this.handleChangeBusiness,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), React.createElement(TextInput, {\n      s: 12,\n      l: 6,\n      m: 6,\n      xl: 6,\n      label: \"Phone:\",\n      name: \"phone\",\n      value: business.phone,\n      onChange: this.handleChangeBusiness,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), this.displayProvince(business.province)), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(Button, {\n      node: \"button\",\n      waves: \"green\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, \"Update\"))), this.state.successMessage && React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"green-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, this.state.successMessage)), this.state.errorMessage && React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"red-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, this.state.errorMessage)), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(Col, {\n      x: 12,\n      s: 12,\n      l: 12,\n      m: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"Contacts\"), React.createElement(Table, {\n      x: 12,\n      s: 12,\n      l: 12,\n      m: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      \"data-field\": \"id\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      \"data-field\": \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"Phone\"), React.createElement(\"th\", {\n      \"data-field\": \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"th\", {\n      \"data-field\": \"action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Action\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, contacts.map(contact => {\n      return React.createElement(\"tr\", {\n        key: contact._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, contact.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, contact.phone), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, contact.email), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, \"create\")), React.createElement(\"a\", {\n        href: \"#\",\n        style: {\n          marginLeft: \"20px\",\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"clear\"))));\n    }))))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(Col, {\n      s: 12,\n      l: 12,\n      m: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(ContactForm, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    })))) : React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    provinces: state.provinces\n  };\n};\n\nconst mapDispatchToProps = {};\nexport default connect(mapStateToProps, mapDispatchToProps)(BusinessModalDetail);","map":{"version":3,"sources":["/Users/hanguyen/web-projects/crm-beeblee-node/client/src/features/business/BusinessModalDetail.jsx"],"names":["React","Component","connect","Modal","Button","Row","Col","TextInput","Select","Table","Icon","Loading","axios","ContactForm","EEXIST","BusinessModalDetail","constructor","props","handleChangeBusiness","e","field","target","name","value","business","state","setState","updateBusiness","preventDefault","_id","phone","address","province","errorMessage","successMessage","loading","patch","then","response","updateData","catch","error","console","log","componentDidMount","getBusinessDetail","componentDidUpdate","prevProps","id","get","data","businesses","contacts","err","displayProvince","provinces","filter","classes","dropdownOptions","alignment","autoTrigger","closeOnClick","constrainWidth","container","coverTrigger","hover","inDuration","onCloseEnd","onCloseStart","onOpenEnd","onOpenStart","outDuration","map","render","boder","dismissible","endingTop","opacity","preventScrolling","startingTop","contact","email","marginLeft","color","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n    Modal,\n    Button,\n    Row,\n    Col,\n    TextInput,\n    Select,\n    Table, Icon\n} from \"react-materialize\";\nimport Loading from \"../loading/Loading\";\nimport axios from \"axios\";\nimport ContactForm from \"../contact/ContactForm\";\nimport { EEXIST } from \"constants\";\n\nclass BusinessModalDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n    }\n\n    componentDidMount() {\n        this.setState({\n            business: this.props.business\n        });\n        this.getBusinessDetail(this.props.business._id);\n    }\n\n    componentDidUpdate(prevProps) {\n        if(prevProps.business._id !== this.props.business._id){\n            this.getBusinessDetail(this.props.business._id)\n            this.setState({\n                business: this.props.business,\n                errorMessage:'',\n                successMessage:''\n            })\n        }\n    }\n\n    getBusinessDetail(id) {\n        this.setState({\n            ...this.state,\n            loading: true\n        });\n        axios\n            .get(`businesses/${id}`)\n            .then(response => {\n                if (response.data.businesses) {\n                    this.setState({\n                        ...this.state,\n                        contacts: response.data.businesses.contacts,\n                        province: response.data.businesses.province,\n                        loading: false\n                    });\n                }\n            })\n            .catch(err => {\n                this.setState({\n                    loading: false\n                });\n            });\n    }\n\n    handleChangeBusiness = e => {\n        const field = e.target.name\n        const value = e.target.value \n\n        let business = this.state.business\n        business[field] = value\n        this.setState({\n            ...this.state,\n            business\n        })\n    };\n\n    updateBusiness = e => {\n        e.preventDefault()\n        const _id = this.state.business._id\n        const business = {\n            name: this.state.business.name,\n            phone: this.state.business.phone,\n            address: this.state.business.address,\n            province: this.state.business.province\n        }\n        this.setState({\n            errorMessage:'',\n            successMessage:'',\n            loading: true,\n        })\n        axios.patch(`businesses/${_id}`, business).then(response => {\n            //Update the data in the parent component\n          this.props.updateData()\n          this.setState({\n              ...this.state, \n              successMessage: 'Save successfully!',\n              loading: false,\n          })\n        }).catch(error => {\n            console.log(error)\n        })\n    }\n\n    displayProvince(_id) {\n        const { provinces } = this.props;\n        const province = provinces.filter(province => province._id === _id)[0];\n        return (\n            <Select\n                options={{\n                    classes: \"\",\n                    dropdownOptions: {\n                        alignment: \"left\",\n                        autoTrigger: true,\n                        closeOnClick: true,\n                        constrainWidth: true,\n                        container: null,\n                        coverTrigger: true,\n                        hover: false,\n                        inDuration: 150,\n                        onCloseEnd: null,\n                        onCloseStart: null,\n                        onOpenEnd: null,\n                        onOpenStart: null,\n                        outDuration: 250\n                    }\n                }}\n                onChange={this.handleChangeBusiness}\n                value={province._id}\n                name='province'\n            >\n                <option disabled value=''>\n                    Select Province\n                </option>\n                {provinces.map(province => {\n                    return (\n                        <option\n                            className='black-text'\n                            key={province._id}\n                            value={province._id}\n                        >\n                            {province.name}\n                        </option>\n                    );\n                })}\n            </Select>\n        );\n    }\n\n    render() {\n       \n        const contacts = this.state.contacts || [];\n        if(!this.state.business) {\n            return <Loading/>\n        }\n        const { business } = this.state;\n        return (\n            <Modal\n                actions={[\n                    <Button flat modal='close' node='button' waves='green'>\n                        Close\n                    </Button>\n                ]}\n                open={true}\n                style={{ boder: \"none\" }}\n                bottomSheet={false}\n                fixedFooter={false}\n                header='Business Detail'\n                id='modal1'\n                required\n                options={{\n                    dismissible: true,\n                    endingTop: \"10%\",\n                    inDuration: 250,\n                    onCloseEnd: null,\n                    onCloseStart: null,\n                    onOpenEnd: null,\n                    onOpenStart: null,\n                    opacity: 0.5,\n                    outDuration: 250,\n                    preventScrolling: true,\n                    startingTop: \"4%\"\n                }}\n            >\n                {!this.state.loading ? (\n                    <div>\n                        <form onSubmit={this.updateBusiness}>\n                            <Row>\n                                <TextInput\n                                    s={12}\n                                    l={6}\n                                    m={6}\n                                    xl={6}\n                                    label='Name:'\n                                    value={business.name}\n                                    name='name'\n                                    onChange={this.handleChangeBusiness}\n                                    required\n                                />\n                                <TextInput\n                                    s={12}\n                                    l={6}\n                                    m={6}\n                                    xl={6}\n                                    label='Address'\n                                    name='address'\n                                    value={business.address}\n                                    onChange={this.handleChangeBusiness}\n                                    required\n                                />\n                                <TextInput\n                                    s={12}\n                                    l={6}\n                                    m={6}\n                                    xl={6}\n                                    label='Phone:'\n                                    name='phone'\n                                    value={business.phone}\n                                    onChange={this.handleChangeBusiness}\n                                    required\n                                />\n\n                                {this.displayProvince(business.province)}\n                            </Row>\n                            <Row>\n                                <Button node='button' waves='green'>\n                                    Update\n                                </Button>\n                            </Row>\n                        </form>\n                        {this.state.successMessage && <Row>\n                            <p className=\"green-text\">{this.state.successMessage}</p>\n                        </Row>}\n                        {this.state.errorMessage && <Row>\n                            <p className=\"red-text\">{this.state.errorMessage}</p>\n                        </Row>}\n                        <Row>\n                            <Col x={12} s={12} l={12} m={12} xl={12}>\n                                <h5>Contacts</h5>\n                                <Table x={12} s={12} l={12} m={12} xl={12}>\n                                    <thead>\n                                        <tr>\n                                            <th data-field='id'>Name</th>\n                                            <th data-field='name'>Phone</th>\n                                            <th data-field='email'>Email</th>\n                                            <th data-field='action'>Action</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {contacts.map(contact => {\n                                            return (\n                                                <tr key={contact._id}>\n                                                    <td>{contact.name}</td>\n                                                    <td>{contact.phone}</td>\n                                                    <td>{contact.email}</td>\n                                                    <td>\n                                                        <a href=\"#\"><Icon>create</Icon></a>\n                                                        <a href=\"#\" style={{marginLeft:\"20px\", color: \"red\"}}><Icon>clear</Icon></a>\n                                                    </td>\n                                                </tr>\n                                            );\n                                        })}\n                                    </tbody>\n                                </Table>\n                            </Col>\n                        </Row>\n\n                        <Row>\n                            <Col s={12} l={12} m={12} xl={12}>\n                                        <ContactForm/>\n                            </Col>\n                        </Row>\n                    </div>\n                ) : (\n                    <Loading />\n                )}\n            </Modal>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return { provinces: state.provinces };\n};\n\nconst mapDispatchToProps = {};\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(BusinessModalDetail);\n"]},"metadata":{},"sourceType":"module"}