{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Modal,Button,Row,TextInput}from\"react-materialize\";import formatPhone from\"../../utils/commons/FormatPhone\";import ProvinceDropdown from\"../common/ProvinceDropdown\";import API from\"../../utils/API/API\";import BusinessForm from'./BusinessForm';function mapStateToProps(state){return{};}var CreateBusinessModal=/*#__PURE__*/function(_Component){_inherits(CreateBusinessModal,_Component);function CreateBusinessModal(){var _getPrototypeOf2;var _this;_classCallCheck(this,CreateBusinessModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CreateBusinessModal)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={business:{name:\"\",address:\"\",phone:\"\",province:\"\"}};_this.handleChange=function(e){var field=e.target.name;var value=e.target.value;if(field===\"phone\"){value=formatPhone(value);}var business=_this.state.business;business[field]=value;_this.setState(business);};_this.handleSubmit=function(e){e.preventDefault();var business=_this.state.business;if(!business._id){API.post(\"businesses\",business).then(function(response){_this.props.updateData();_this.props.closeCreateModal();}).catch(function(error){console.log(error);});}else{API.patch(\"businesses/\".concat(business._id),business).then(function(response){//Update the data in the parent component\n_this.props.updateData();_this.setState(_objectSpread({},_this.state,{successMessage:\"Save successfully!\",loading:false}));}).catch(function(error){_this.setState({errorMessage:\"Cannot save the data!\",loading:false});});}};return _this;}_createClass(CreateBusinessModal,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.business){this.setState({business:this.props.business});}}},{key:\"render\",value:function render(){var business=this.state.business;return React.createElement(\"div\",null,React.createElement(Modal,{actions:[React.createElement(Button,{flat:true,modal:\"close\",node:\"button\",waves:\"green\"},\"Close\")],bottomSheet:false,fixedFooter:false,header:\"Create a new business\",id:\"modal-1\",open:true,options:{dismissible:true,endingTop:\"10%\",inDuration:250,onCloseEnd:this.props.closeCreateModal,onCloseStart:null,onOpenEnd:null,onOpenStart:null,opacity:0.5,outDuration:250,preventScrolling:true,startingTop:\"4%\"}},React.createElement(BusinessForm,{updateData:this.props.updateData,closeCreateModal:this.props.closeCreateModal})));}}]);return CreateBusinessModal;}(Component);export default connect(mapStateToProps)(CreateBusinessModal);","map":{"version":3,"sources":["C:/xampp/htdocs/beeblee-crm-client/src/features/business/CreateBusinessModal.jsx"],"names":["React","Component","connect","Modal","Button","Row","TextInput","formatPhone","ProvinceDropdown","API","BusinessForm","mapStateToProps","state","CreateBusinessModal","business","name","address","phone","province","handleChange","e","field","target","value","setState","handleSubmit","preventDefault","_id","post","then","response","props","updateData","closeCreateModal","catch","error","console","log","patch","successMessage","loading","errorMessage","dismissible","endingTop","inDuration","onCloseEnd","onCloseStart","onOpenEnd","onOpenStart","opacity","outDuration","preventScrolling","startingTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Row, TextInput } from \"react-materialize\";\r\nimport formatPhone from \"../../utils/commons/FormatPhone\";\r\nimport ProvinceDropdown from \"../common/ProvinceDropdown\";\r\nimport API from \"../../utils/API/API\";\r\nimport BusinessForm from './BusinessForm'\r\nfunction mapStateToProps(state) {\r\n  return {};\r\n}\r\n\r\nclass CreateBusinessModal extends Component {\r\n  state = {\r\n    business: { name: \"\", address: \"\", phone: \"\", province: \"\" }\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.business) {\r\n      this.setState({\r\n        business: this.props.business\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChange = e => {\r\n    const field = e.target.name;\r\n    let value = e.target.value;\r\n\r\n    if (field === \"phone\") {\r\n      value = formatPhone(value);\r\n    }\r\n\r\n    let business = this.state.business;\r\n    business[field] = value;\r\n    this.setState( business);\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    const { business } = this.state;\r\n    if (!business._id) {\r\n      API.post(`businesses`, business)\r\n        .then(response => {\r\n          this.props.updateData();\r\n          this.props.closeCreateModal();\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    } else {\r\n\r\n      API.patch(`businesses/${business._id}`, business)\r\n      .then(response => {\r\n        //Update the data in the parent component\r\n        this.props.updateData();\r\n        this.setState({\r\n          ...this.state,\r\n          successMessage: \"Save successfully!\",\r\n          loading: false\r\n        });\r\n      })\r\n      .catch(error => {\r\n        this.setState({\r\n          errorMessage: \"Cannot save the data!\",\r\n          loading: false\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { business } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <Modal\r\n          actions={[\r\n            <Button flat modal=\"close\" node=\"button\" waves=\"green\">\r\n              Close\r\n            </Button>\r\n          ]}\r\n          bottomSheet={false}\r\n          fixedFooter={false}\r\n          header=\"Create a new business\"\r\n          id=\"modal-1\"\r\n          open={true}\r\n          options={{\r\n            dismissible: true,\r\n            endingTop: \"10%\",\r\n            inDuration: 250,\r\n            onCloseEnd: this.props.closeCreateModal,\r\n            onCloseStart: null,\r\n            onOpenEnd: null,\r\n            onOpenStart: null,\r\n            opacity: 0.5,\r\n            outDuration: 250,\r\n            preventScrolling: true,\r\n            startingTop: \"4%\"\r\n          }}\r\n        >\r\n          <BusinessForm updateData={this.props.updateData} closeCreateModal={this.props.closeCreateModal}/>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CreateBusinessModal);\r\n"]},"metadata":{},"sourceType":"module"}