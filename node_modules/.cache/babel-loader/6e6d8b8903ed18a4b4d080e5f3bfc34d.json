{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Chip,Icon,Row,Table,Button}from\"react-materialize\";import API from\"../../../utils/API/API\";function mapStateToProps(state){return{};}var ContributorForm=/*#__PURE__*/function(_Component){_inherits(ContributorForm,_Component);function ContributorForm(){var _getPrototypeOf2;var _this;_classCallCheck(this,ContributorForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ContributorForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={contributors:[],users:[],project:{},edited:false,successMessage:\"\",errorMessage:\"\"};_this.displayContributor=function(){var contributors=_this.state.contributors;var data=[];contributors.forEach(function(contributor){var name=contributor.name;var userId=contributor._id;data.push({tag:name,userId:userId});});return React.createElement(Chip,{close:true,closeIcon:React.createElement(Icon,{className:\"close\"},\"close\"),options:{data:data,placeholder:\"Contributors\",onChipDelete:_this.removeContributor(data)}});};_this.removeContributor=function(newContributorData){return function(){var newContributors=[];newContributorData.forEach(function(contributor){newContributors.push(contributor.userId);});var currentContributors=_this.state.contributors;currentContributors=currentContributors.filter(function(contributor){return newContributors.includes(contributor._id);});_this.setState({contributors:currentContributors,edited:true,errorMessage:\"\"});};};_this.addContributor=function(user){return function(){var currentContributors=_this.state.contributors;if(!currentContributors.includes(user)){currentContributors.push(user);_this.setState({contributors:currentContributors,errorMessage:\"\",edited:true});}else{_this.setState({errorMessage:\"Contributor already exist!\",successMessage:\"\"});}};};_this.handleUpdateContributors=function(e){e.preventDefault();var contributors=_this.state.contributors;var userIds=[];contributors.forEach(function(contributor){userIds.push(contributor._id);});var projectId=_this.state.project._id;if(projectId){API.patch(\"/projects\",{projectId:projectId,userIds:userIds}).then(function(response){_this.setState({successMessage:\"Update project successfully!\",errorMessage:\"\",edited:false});_this.props.updateData();}).catch(function(error){_this.setState({successMessage:\"\",errorMessage:\"There is an error occurred!\",edited:false});});}else{_this.setState({errorMessage:\"Missing Project Id for update\",successMessage:\"\"});}};_this.displayUser=function(){var users=_this.props.users;return users.map(function(user){return React.createElement(\"tr\",{key:user._id},React.createElement(\"td\",null,user.name),React.createElement(\"td\",null,user.email),React.createElement(\"td\",null,user.role),React.createElement(\"td\",null,user.active.toString()===\"true\"?React.createElement(\"span\",{className:\"dot active\"}):React.createElement(\"span\",{className:\"dot inactive\"})),React.createElement(\"td\",null,React.createElement(Button,{node:\"button\",className:\"gradient-btn btn-red\",style:{marginRight:\"5px\"},waves:\"light\",onClick:_this.addContributor(user)},\"Add\",React.createElement(Icon,{left:true},\"add\"))));});};return _this;}_createClass(ContributorForm,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props=this.props,contributors=_this$props.contributors,users=_this$props.users,project=_this$props.project;this.setState({contributors:contributors,users:users,project:project});}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.contributors!==this.props.contributor){this.setState({contributors:nextProps.contributors,users:nextProps.users,project:nextProps.project});}}},{key:\"render\",value:function render(){var edited=this.state.edited;return React.createElement(\"div\",null,this.displayContributor(),React.createElement(Row,null,React.createElement(Table,{hoverable:true,responsive:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{\"data-field\":\"name\"},\"Name\"),React.createElement(\"th\",{\"data-field\":\"email\"},\"Email\"),React.createElement(\"th\",{\"data-field\":\"role\"},\"Role\"),React.createElement(\"th\",{\"data-field\":\"active\"},\"Active\"),React.createElement(\"th\",{\"data-field\":\"add\"},\"Add\"))),React.createElement(\"tbody\",null,this.displayUser()))),React.createElement(Row,null,React.createElement(Button,{node:\"button\",style:{margin:\"5px\"},waves:\"light\",className:edited?\"gradient-btn btn-green\":\"\",disabled:!edited,onClick:this.handleUpdateContributors},\"Save\",React.createElement(Icon,{left:true},\"save\"))),React.createElement(Row,null,this.state.successMessage&&React.createElement(Row,{className:\"animated shake\"},React.createElement(\"p\",{className:\"green-text animated bounceOutLeft delay-3s\"},this.state.successMessage)),this.state.errorMessage&&React.createElement(Row,{className:\"animated rubberBand\"},React.createElement(\"p\",{className:\"red-text animated bounceOutLeft delay-3s \"},this.state.errorMessage))));}}]);return ContributorForm;}(Component);export default connect(mapStateToProps)(ContributorForm);","map":{"version":3,"sources":["C:/xampp/htdocs/beeblee-crm-client/src/features/admin/project/ContributorForm.jsx"],"names":["React","Component","connect","Chip","Icon","Row","Table","Button","API","mapStateToProps","state","ContributorForm","contributors","users","project","edited","successMessage","errorMessage","displayContributor","data","forEach","contributor","name","userId","_id","push","tag","placeholder","onChipDelete","removeContributor","newContributorData","newContributors","currentContributors","filter","includes","setState","addContributor","user","handleUpdateContributors","e","preventDefault","userIds","projectId","patch","then","response","props","updateData","catch","error","displayUser","map","email","role","active","toString","marginRight","nextProps","margin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Chip, Icon, Row, Table, Button } from \"react-materialize\";\r\nimport API from \"../../../utils/API/API\";\r\n\r\nfunction mapStateToProps(state) {\r\n  return {};\r\n}\r\n\r\nclass ContributorForm extends Component {\r\n  state = {\r\n    contributors: [],\r\n    users: [],\r\n    project: {},\r\n    edited: false,\r\n    successMessage: \"\",\r\n    errorMessage: \"\"\r\n  };\r\n  componentDidMount() {\r\n    let { contributors, users, project } = this.props;\r\n    this.setState({\r\n      contributors,\r\n      users,\r\n      project\r\n    });\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.contributors !== this.props.contributor) {\r\n      this.setState({\r\n        contributors: nextProps.contributors,\r\n        users: nextProps.users,\r\n        project: nextProps.project\r\n      });\r\n    }\r\n  }\r\n  displayContributor = () => {\r\n    const { contributors } = this.state;\r\n    const data = [];\r\n    contributors.forEach(contributor => {\r\n      const name = contributor.name;\r\n      const userId = contributor._id;\r\n      data.push({ tag: name, userId });\r\n    });\r\n    return (\r\n      <Chip\r\n        close={true}\r\n        closeIcon={<Icon className=\"close\">close</Icon>}\r\n        options={{\r\n          data: data,\r\n          placeholder: \"Contributors\",\r\n          onChipDelete: this.removeContributor(data)\r\n        }}\r\n      />\r\n    );\r\n  };\r\n  removeContributor = newContributorData => () => {\r\n    let newContributors = [];\r\n    newContributorData.forEach(contributor => {\r\n      newContributors.push(contributor.userId);\r\n    });\r\n    let currentContributors = this.state.contributors;\r\n    currentContributors = currentContributors.filter(contributor =>\r\n      newContributors.includes(contributor._id)\r\n    );\r\n    this.setState({\r\n      contributors: currentContributors,\r\n      edited: true,\r\n      errorMessage: \"\"\r\n    });\r\n  };\r\n\r\n  addContributor = user => () => {\r\n    let currentContributors = this.state.contributors;\r\n    if (!currentContributors.includes(user)) {\r\n      currentContributors.push(user);\r\n      this.setState({\r\n        contributors: currentContributors,\r\n        errorMessage: \"\",\r\n        edited: true\r\n      });\r\n    } else {\r\n      this.setState({\r\n        errorMessage: \"Contributor already exist!\",\r\n        successMessage: \"\"\r\n      });\r\n    }\r\n  };\r\n\r\n  handleUpdateContributors = e => {\r\n    e.preventDefault();\r\n\r\n    const { contributors } = this.state;\r\n    let userIds = [];\r\n    contributors.forEach(contributor => {\r\n        userIds.push(contributor._id)\r\n    });\r\n\r\n    const projectId = this.state.project._id\r\n\r\n    if(projectId) {\r\n        API.patch(\"/projects\", {projectId, userIds}).then(response => {\r\n            this.setState({\r\n                successMessage: \"Update project successfully!\",\r\n                errorMessage: \"\",\r\n                edited: false,\r\n            })\r\n            this.props.updateData()\r\n        }).catch(error => {\r\n            this.setState({\r\n                successMessage: \"\",\r\n                errorMessage: \"There is an error occurred!\",\r\n                edited: false,\r\n            })\r\n        })\r\n    } else {\r\n        this.setState({\r\n            errorMessage: \"Missing Project Id for update\",\r\n            successMessage: \"\"\r\n        })\r\n    }\r\n\r\n  };\r\n\r\n  displayUser = () => {\r\n    const { users } = this.props;\r\n    return users.map(user => {\r\n      return (\r\n        <tr key={user._id}>\r\n          <td>{user.name}</td>\r\n          <td>{user.email}</td>\r\n          <td>{user.role}</td>\r\n          <td>\r\n            {user.active.toString() === \"true\" ? (\r\n              <span className=\"dot active\"></span>\r\n            ) : (\r\n              <span className=\"dot inactive\"></span>\r\n            )}\r\n          </td>\r\n          <td>\r\n            <Button\r\n              node=\"button\"\r\n              className=\"gradient-btn btn-red\"\r\n              style={{\r\n                marginRight: \"5px\"\r\n              }}\r\n              waves=\"light\"\r\n              onClick={this.addContributor(user)}\r\n            >\r\n              Add\r\n              <Icon left>add</Icon>\r\n            </Button>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { edited } = this.state;\r\n    return (\r\n      <div>\r\n        {this.displayContributor()}\r\n        <Row>\r\n          <Table hoverable={true} responsive={true}>\r\n            <thead>\r\n              <tr>\r\n                <th data-field=\"name\">Name</th>\r\n                <th data-field=\"email\">Email</th>\r\n                <th data-field=\"role\">Role</th>\r\n                <th data-field=\"active\">Active</th>\r\n                <th data-field=\"add\">Add</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>{this.displayUser()}</tbody>\r\n          </Table>\r\n        </Row>\r\n        <Row>\r\n          <Button\r\n            node=\"button\"\r\n            style={{\r\n              margin: \"5px\"\r\n            }}\r\n            waves=\"light\"\r\n            className={edited ? \"gradient-btn btn-green\" : \"\"}\r\n            disabled={!edited}\r\n            onClick={this.handleUpdateContributors}\r\n          >\r\n            Save\r\n            <Icon left>save</Icon>\r\n          </Button>\r\n        </Row>\r\n        <Row>\r\n          {this.state.successMessage && (\r\n            <Row className=\"animated shake\">\r\n              <p className=\"green-text animated bounceOutLeft delay-3s\">\r\n                {this.state.successMessage}\r\n              </p>\r\n            </Row>\r\n          )}\r\n          {this.state.errorMessage && (\r\n            <Row className=\"animated rubberBand\">\r\n              <p className=\"red-text animated bounceOutLeft delay-3s \">\r\n                {this.state.errorMessage}\r\n              </p>\r\n            </Row>\r\n          )}\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ContributorForm);\r\n"]},"metadata":{},"sourceType":"module"}