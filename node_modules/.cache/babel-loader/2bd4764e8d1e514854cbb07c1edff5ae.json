{"ast":null,"code":"import _objectSpread from \"/Users/hanguyen/web-projects/crm-beeblee-node/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/hanguyen/web-projects/crm-beeblee-node/client/src/features/profile/Profile.jsx\";\nimport React, { Component } from \"react\";\nimport { Row, Col, TextInput, Button, Icon, Toast } from \"react-materialize\";\nimport { connect } from \"react-redux\";\nimport Loading from \"../loading/Loading\";\nimport axios from \"axios\";\nimport { update_profile } from \"../../redux/actions/index\";\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    update_profile: newProfile => dispatch(update_profile(newProfile))\n  };\n}\n\nclass Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {\n        name: \"\",\n        email: \"\",\n        phone: \"\"\n      },\n      currentPassword: '',\n      newPassword: '',\n      repeatPassword: '',\n      errMessage: \"\",\n      sussess: false\n    };\n\n    this.handleInputChange = e => {\n      const user = _objectSpread({}, this.state.user);\n\n      const field = e.target.name;\n      const newValue = e.target.value;\n      user[field] = newValue;\n      this.setState({\n        user\n      });\n    };\n\n    this.handlePasswordInputChange = e => {\n      const field = e.target.name;\n      const newValue = e.target.value;\n      this.setState({\n        [field]: newValue\n      });\n    };\n\n    this.handleChangePassword = e => {\n      e.preventDefault();\n      this.setState({\n        errMessage: \"\",\n        sussess: false\n      });\n      console.log(this.state);\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const data = this.state.user;\n      this.setState({\n        errMessage: \"\",\n        sussess: false\n      }); //get the token for verifying request\n\n      const token = localStorage.getItem(\"token\");\n      axios.defaults.baseURL = \"http://localhost:3000/\";\n      axios.defaults.headers.common = {\n        Authorization: `Bearer ${token}`\n      };\n      axios.patch(`users/update/profile`, {\n        data\n      }).then(response => {\n        const user = response.data;\n        this.props.update_profile(user);\n        this.setState({\n          sussess: true\n        });\n      }).catch(error => {\n        this.setState({\n          errMessage: \"Some errors has been occurred!\"\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    const user = this.props.user;\n    this.setState(prevState => _objectSpread({}, prevState, {\n      user: _objectSpread({}, this.state.user, {\n        email: user.email,\n        name: user.name,\n        phone: user.phone\n      })\n    }));\n  }\n\n  render() {\n    if (!this.state.user) {\n      return React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      });\n    }\n\n    const _this$state = this.state,\n          user = _this$state.user,\n          errMessage = _this$state.errMessage,\n          sussess = _this$state.sussess;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"User Profile\"), sussess && React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Col, {\n      s: 12,\n      m: 6,\n      l: 6,\n      xl: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      class: \"green-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Update Sussessfully\"))), errMessage && React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Col, {\n      s: 12,\n      m: 12,\n      l: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"red-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, errMessage || \"\"))), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Col, {\n      s: 12,\n      m: 6,\n      l: 6,\n      xl: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      s: 12,\n      l: 12,\n      m: 12,\n      label: \"Name\",\n      value: user.name,\n      name: \"name\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })), React.createElement(Col, {\n      s: 12,\n      m: 6,\n      l: 6,\n      xl: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      email: true,\n      validate: true,\n      disabled: true,\n      s: 12,\n      l: 12,\n      m: 12,\n      label: \"Email\",\n      value: user.email,\n      readOnly: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    })), React.createElement(Col, {\n      s: 12,\n      m: 6,\n      l: 6,\n      xl: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      s: 12,\n      l: 12,\n      m: 12,\n      label: \"Phone\",\n      name: \"phone\",\n      value: user.phone,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Button, {\n      node: \"button\",\n      type: \"submit\",\n      waves: \"light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Save\", React.createElement(Icon, {\n      right: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"send\")))), React.createElement(\"form\", {\n      onSubmit: this.handleChangePassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Change Password\"), React.createElement(Col, {\n      s: 12,\n      m: 12,\n      l: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      password: true,\n      s: 12,\n      l: 12,\n      m: 12,\n      label: \"Current Password\",\n      name: \"currentPassword\",\n      value: user.currentPassword,\n      onChange: this.handlePasswordInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), React.createElement(Col, {\n      s: 12,\n      m: 6,\n      l: 6,\n      xl: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      password: true,\n      s: 12,\n      l: 12,\n      m: 12,\n      label: \"New Password\",\n      name: \"newPassword\",\n      value: user.newPassword,\n      onChange: this.handlePasswordInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    })), React.createElement(Col, {\n      s: 12,\n      m: 6,\n      l: 6,\n      xl: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      password: true,\n      s: 12,\n      l: 12,\n      m: 12,\n      label: \"Repeat Password\",\n      name: \"repeatPassword\",\n      value: user.repeatPassword,\n      onChange: this.handlePasswordInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Button, {\n      node: \"button\",\n      type: \"submit\",\n      waves: \"light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Change Password\", React.createElement(Icon, {\n      right: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"lock\")))));\n  }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);","map":{"version":3,"sources":["/Users/hanguyen/web-projects/crm-beeblee-node/client/src/features/profile/Profile.jsx"],"names":["React","Component","Row","Col","TextInput","Button","Icon","Toast","connect","Loading","axios","update_profile","mapStateToProps","state","user","mapDispatchToProps","dispatch","newProfile","Profile","name","email","phone","currentPassword","newPassword","repeatPassword","errMessage","sussess","handleInputChange","e","field","target","newValue","value","setState","handlePasswordInputChange","handleChangePassword","preventDefault","console","log","handleSubmit","data","token","localStorage","getItem","defaults","baseURL","headers","common","Authorization","patch","then","response","props","catch","error","componentDidMount","prevState","render"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,SAAnB,EAA8BC,MAA9B,EAAsCC,IAAtC,EAA4CC,KAA5C,QAAyD,mBAAzD;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,2BAA/B;;AAEA,MAAMC,eAAe,GAAGC,KAAK,IAAI;AAC7B,SAAO;AAAEC,IAAAA,IAAI,EAAED,KAAK,CAACC;AAAd,GAAP;AACH,CAFD;;AAIA,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AAClC,SAAO;AACHL,IAAAA,cAAc,EAAEM,UAAU,IAAID,QAAQ,CAACL,cAAc,CAACM,UAAD,CAAf;AADnC,GAAP;AAGH;;AAED,MAAMC,OAAN,SAAsBjB,SAAtB,CAAgC;AAAA;AAAA;AAAA,SAC5BY,KAD4B,GACpB;AACJC,MAAAA,IAAI,EAAE;AACFK,QAAAA,IAAI,EAAE,EADJ;AAEFC,QAAAA,KAAK,EAAE,EAFL;AAGFC,QAAAA,KAAK,EAAE;AAHL,OADF;AAMJC,MAAAA,eAAe,EAAC,EANZ;AAOJC,MAAAA,WAAW,EAAC,EAPR;AAQJC,MAAAA,cAAc,EAAC,EARX;AASJC,MAAAA,UAAU,EAAE,EATR;AAUJC,MAAAA,OAAO,EAAE;AAVL,KADoB;;AAAA,SA2B5BC,iBA3B4B,GA2BRC,CAAC,IAAI;AACrB,YAAMd,IAAI,qBAAQ,KAAKD,KAAL,CAAWC,IAAnB,CAAV;;AACA,YAAMe,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASX,IAAvB;AACA,YAAMY,QAAQ,GAAGH,CAAC,CAACE,MAAF,CAASE,KAA1B;AACAlB,MAAAA,IAAI,CAACe,KAAD,CAAJ,GAAcE,QAAd;AACA,WAAKE,QAAL,CAAc;AAAEnB,QAAAA;AAAF,OAAd;AACH,KAjC2B;;AAAA,SAmC5BoB,yBAnC4B,GAmCAN,CAAC,IAAI;AAC7B,YAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASX,IAAvB;AACA,YAAMY,QAAQ,GAAGH,CAAC,CAACE,MAAF,CAASE,KAA1B;AACA,WAAKC,QAAL,CAAc;AACV,SAACJ,KAAD,GAASE;AADC,OAAd;AAGH,KAzC2B;;AAAA,SA2C5BI,oBA3C4B,GA2CLP,CAAC,IAAI;AACxBA,MAAAA,CAAC,CAACQ,cAAF;AACA,WAAKH,QAAL,CAAc;AACVR,QAAAA,UAAU,EAAE,EADF;AAEVC,QAAAA,OAAO,EAAE;AAFC,OAAd;AAIAW,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKzB,KAAjB;AACH,KAlD2B;;AAAA,SAoD5B0B,YApD4B,GAoDbX,CAAC,IAAI;AAChBA,MAAAA,CAAC,CAACQ,cAAF;AACA,YAAMI,IAAI,GAAG,KAAK3B,KAAL,CAAWC,IAAxB;AACA,WAAKmB,QAAL,CAAc;AACVR,QAAAA,UAAU,EAAE,EADF;AAEVC,QAAAA,OAAO,EAAE;AAFC,OAAd,EAHgB,CAQhB;;AACA,YAAMe,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACAjC,MAAAA,KAAK,CAACkC,QAAN,CAAeC,OAAf,GAAyB,wBAAzB;AACAnC,MAAAA,KAAK,CAACkC,QAAN,CAAeE,OAAf,CAAuBC,MAAvB,GAAgC;AAAEC,QAAAA,aAAa,EAAG,UAASP,KAAM;AAAjC,OAAhC;AAEA/B,MAAAA,KAAK,CACAuC,KADL,CACY,sBADZ,EACmC;AAC3BT,QAAAA;AAD2B,OADnC,EAIKU,IAJL,CAIUC,QAAQ,IAAI;AACd,cAAMrC,IAAI,GAAGqC,QAAQ,CAACX,IAAtB;AACA,aAAKY,KAAL,CAAWzC,cAAX,CAA0BG,IAA1B;AACA,aAAKmB,QAAL,CAAc;AACVP,UAAAA,OAAO,EAAE;AADC,SAAd;AAGH,OAVL,EAWK2B,KAXL,CAWWC,KAAK,IAAI;AACZ,aAAKrB,QAAL,CAAc;AACVR,UAAAA,UAAU,EAAE;AADF,SAAd;AAGH,OAfL;AAgBH,KAjF2B;AAAA;;AAc5B8B,EAAAA,iBAAiB,GAAG;AAChB,UAAMzC,IAAI,GAAG,KAAKsC,KAAL,CAAWtC,IAAxB;AACA,SAAKmB,QAAL,CAAcuB,SAAS,sBAChBA,SADgB;AAEnB1C,MAAAA,IAAI,oBACG,KAAKD,KAAL,CAAWC,IADd;AAEAM,QAAAA,KAAK,EAAEN,IAAI,CAACM,KAFZ;AAGAD,QAAAA,IAAI,EAAEL,IAAI,CAACK,IAHX;AAIAE,QAAAA,KAAK,EAAEP,IAAI,CAACO;AAJZ;AAFe,MAAvB;AASH;;AA0DDoC,EAAAA,MAAM,GAAG;AACL,QAAI,CAAC,KAAK5C,KAAL,CAAWC,IAAhB,EAAsB;AAClB,aAAO,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AAHI,wBAIiC,KAAKD,KAJtC;AAAA,UAIGC,IAJH,eAIGA,IAJH;AAAA,UAISW,UAJT,eAISA,UAJT;AAAA,UAIqBC,OAJrB,eAIqBA,OAJrB;AAML,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,EAEKA,OAAO,IACJ,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,GAAD;AAAK,MAAA,CAAC,EAAE,EAAR;AAAY,MAAA,CAAC,EAAE,CAAf;AAAkB,MAAA,CAAC,EAAE,CAArB;AAAwB,MAAA,EAAE,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,KAAK,EAAC,YAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,CADJ,CAHR,EAUKD,UAAU,IACP,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,GAAD;AAAK,MAAA,CAAC,EAAE,EAAR;AAAY,MAAA,CAAC,EAAE,EAAf;AAAmB,MAAA,CAAC,EAAE,EAAtB;AAA0B,MAAA,EAAE,EAAE,EAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBA,UAAU,IAAI,EAAvC,CADJ,CADJ,CAXR,EAiBI;AAAM,MAAA,QAAQ,EAAE,KAAKc,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,GAAD;AAAK,MAAA,CAAC,EAAE,EAAR;AAAY,MAAA,CAAC,EAAE,CAAf;AAAkB,MAAA,CAAC,EAAE,CAArB;AAAwB,MAAA,EAAE,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AACI,MAAA,CAAC,EAAE,EADP;AAEI,MAAA,CAAC,EAAE,EAFP;AAGI,MAAA,CAAC,EAAE,EAHP;AAII,MAAA,KAAK,EAAC,MAJV;AAKI,MAAA,KAAK,EAAEzB,IAAI,CAACK,IALhB;AAMI,MAAA,IAAI,EAAC,MANT;AAOI,MAAA,QAAQ,EAAE,KAAKQ,iBAPnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,EAYI,oBAAC,GAAD;AAAK,MAAA,CAAC,EAAE,EAAR;AAAY,MAAA,CAAC,EAAE,CAAf;AAAkB,MAAA,CAAC,EAAE,CAArB;AAAwB,MAAA,EAAE,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AACI,MAAA,KAAK,MADT;AAEI,MAAA,QAAQ,MAFZ;AAGI,MAAA,QAAQ,MAHZ;AAII,MAAA,CAAC,EAAE,EAJP;AAKI,MAAA,CAAC,EAAE,EALP;AAMI,MAAA,CAAC,EAAE,EANP;AAOI,MAAA,KAAK,EAAC,OAPV;AAQI,MAAA,KAAK,EAAEb,IAAI,CAACM,KARhB;AASI,MAAA,QAAQ,MATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAZJ,EAyBI,oBAAC,GAAD;AAAK,MAAA,CAAC,EAAE,EAAR;AAAY,MAAA,CAAC,EAAE,CAAf;AAAkB,MAAA,CAAC,EAAE,CAArB;AAAwB,MAAA,EAAE,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AACI,MAAA,CAAC,EAAE,EADP;AAEI,MAAA,CAAC,EAAE,EAFP;AAGI,MAAA,CAAC,EAAE,EAHP;AAII,MAAA,KAAK,EAAC,OAJV;AAKI,MAAA,IAAI,EAAC,OALT;AAMI,MAAA,KAAK,EAAEN,IAAI,CAACO,KANhB;AAOI,MAAA,QAAQ,EAAE,KAAKM,iBAPnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAzBJ,CADJ,EAuCI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,IAAI,EAAC,QAA3B;AAAoC,MAAA,KAAK,EAAC,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAEI,oBAAC,IAAD;AAAM,MAAA,KAAK,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CADJ,CAvCJ,CAjBJ,EA+DI;AAAM,MAAA,QAAQ,EAAE,KAAKQ,oBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,EAEI,oBAAC,GAAD;AAAK,MAAA,CAAC,EAAE,EAAR;AAAY,MAAA,CAAC,EAAE,EAAf;AAAmB,MAAA,CAAC,EAAE,EAAtB;AAA0B,MAAA,EAAE,EAAE,EAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AACI,MAAA,QAAQ,MADZ;AAEI,MAAA,CAAC,EAAE,EAFP;AAGI,MAAA,CAAC,EAAE,EAHP;AAII,MAAA,CAAC,EAAE,EAJP;AAKI,MAAA,KAAK,EAAC,kBALV;AAMI,MAAA,IAAI,EAAC,iBANT;AAOI,MAAA,KAAK,EAAErB,IAAI,CAACQ,eAPhB;AAQI,MAAA,QAAQ,EAAE,KAAKY,yBARnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,EAcI,oBAAC,GAAD;AAAK,MAAA,CAAC,EAAE,EAAR;AAAY,MAAA,CAAC,EAAE,CAAf;AAAkB,MAAA,CAAC,EAAE,CAArB;AAAwB,MAAA,EAAE,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AACI,MAAA,QAAQ,MADZ;AAEI,MAAA,CAAC,EAAE,EAFP;AAGI,MAAA,CAAC,EAAE,EAHP;AAII,MAAA,CAAC,EAAE,EAJP;AAKI,MAAA,KAAK,EAAC,cALV;AAMI,MAAA,IAAI,EAAC,aANT;AAOI,MAAA,KAAK,EAAEpB,IAAI,CAACS,WAPhB;AAQI,MAAA,QAAQ,EAAE,KAAKW,yBARnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAdJ,EA0BI,oBAAC,GAAD;AAAK,MAAA,CAAC,EAAE,EAAR;AAAY,MAAA,CAAC,EAAE,CAAf;AAAkB,MAAA,CAAC,EAAE,CAArB;AAAwB,MAAA,EAAE,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AACI,MAAA,QAAQ,MADZ;AAEI,MAAA,CAAC,EAAE,EAFP;AAGI,MAAA,CAAC,EAAE,EAHP;AAII,MAAA,CAAC,EAAE,EAJP;AAKI,MAAA,KAAK,EAAC,iBALV;AAMI,MAAA,IAAI,EAAC,gBANT;AAOI,MAAA,KAAK,EAAEpB,IAAI,CAACU,cAPhB;AAQI,MAAA,QAAQ,EAAE,KAAKU,yBARnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CA1BJ,CADJ,EAyCI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,IAAI,EAAC,QAA3B;AAAoC,MAAA,KAAK,EAAC,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAEI,oBAAC,IAAD;AAAM,MAAA,KAAK,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CADJ,CAzCJ,CA/DJ,CADJ;AAkHH;;AA3M2B;;AA8MhC,eAAe1B,OAAO,CAACI,eAAD,EAAkBG,kBAAlB,CAAP,CAA6CG,OAA7C,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Row, Col, TextInput, Button, Icon, Toast } from \"react-materialize\";\nimport { connect } from \"react-redux\";\nimport Loading from \"../loading/Loading\";\nimport axios from \"axios\";\nimport { update_profile } from \"../../redux/actions/index\";\n\nconst mapStateToProps = state => {\n    return { user: state.user };\n};\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        update_profile: newProfile => dispatch(update_profile(newProfile))\n    };\n}\n\nclass Profile extends Component {\n    state = {\n        user: {\n            name: \"\",\n            email: \"\",\n            phone: \"\"\n        },\n        currentPassword:'',\n        newPassword:'',\n        repeatPassword:'',\n        errMessage: \"\",\n        sussess: false\n    };\n\n    componentDidMount() {\n        const user = this.props.user;\n        this.setState(prevState => ({\n            ...prevState,\n            user: {\n                ...this.state.user,\n                email: user.email,\n                name: user.name,\n                phone: user.phone\n            }\n        }));\n    }\n\n    handleInputChange = e => {\n        const user = { ...this.state.user };\n        const field = e.target.name;\n        const newValue = e.target.value;\n        user[field] = newValue;\n        this.setState({ user });\n    };\n\n    handlePasswordInputChange = e => {\n        const field = e.target.name;\n        const newValue = e.target.value;\n        this.setState({\n            [field]: newValue\n        })\n    }\n\n    handleChangePassword = e => {\n        e.preventDefault()\n        this.setState({\n            errMessage: \"\",\n            sussess: false\n        });\n        console.log(this.state)\n    };\n\n    handleSubmit = e => {\n        e.preventDefault();\n        const data = this.state.user;\n        this.setState({\n            errMessage: \"\",\n            sussess: false\n        });\n\n        //get the token for verifying request\n        const token = localStorage.getItem(\"token\");\n        axios.defaults.baseURL = \"http://localhost:3000/\";\n        axios.defaults.headers.common = { Authorization: `Bearer ${token}` };\n\n        axios\n            .patch(`users/update/profile`, {\n                data\n            })\n            .then(response => {\n                const user = response.data;\n                this.props.update_profile(user);\n                this.setState({\n                    sussess: true,\n                });\n            })\n            .catch(error => {\n                this.setState({ \n                    errMessage: \"Some errors has been occurred!\"\n                })\n            });\n    };\n\n    render() {\n        if (!this.state.user) {\n            return <Loading />;\n        }\n        const { user, errMessage, sussess } = this.state;\n\n        return (\n            <div>\n                <h5>User Profile</h5>\n                {sussess && (\n                    <Row>\n                        <Col s={12} m={6} l={6} xl={6}>\n                            <p class='green-text'>Update Sussessfully</p>\n                        </Col>\n                    </Row>\n                )}\n\n                {errMessage && (\n                    <Row>\n                        <Col s={12} m={12} l={12} xl={12}>\n                            <p className='red-text'>{errMessage || \"\"}</p>\n                        </Col>\n                    </Row>\n                )}\n                <form onSubmit={this.handleSubmit}>\n                    <Row>\n                        <Col s={12} m={6} l={6} xl={6}>\n                            <TextInput\n                                s={12}\n                                l={12}\n                                m={12}\n                                label='Name'\n                                value={user.name}\n                                name='name'\n                                onChange={this.handleInputChange}\n                            />\n                        </Col>\n                        <Col s={12} m={6} l={6} xl={6}>\n                            <TextInput\n                                email\n                                validate\n                                disabled\n                                s={12}\n                                l={12}\n                                m={12}\n                                label='Email'\n                                value={user.email}\n                                readOnly\n                            />\n                        </Col>\n                        <Col s={12} m={6} l={6} xl={6}>\n                            <TextInput\n                                s={12}\n                                l={12}\n                                m={12}\n                                label='Phone'\n                                name='phone'\n                                value={user.phone}\n                                onChange={this.handleInputChange}\n                            />\n                        </Col>\n                    </Row>\n\n                    <Row>\n                        <Button node='button' type='submit' waves='light'>\n                            Save\n                            <Icon right>send</Icon>\n                        </Button>\n                    </Row>\n                </form>\n                <form onSubmit={this.handleChangePassword}>\n                    <Row>\n                        <h5>Change Password</h5>\n                        <Col s={12} m={12} l={12} xl={12}>\n                            <TextInput\n                                password\n                                s={12}\n                                l={12}\n                                m={12}\n                                label='Current Password'\n                                name='currentPassword'\n                                value={user.currentPassword}\n                                onChange={this.handlePasswordInputChange}\n                            />\n                        </Col>\n                        <Col s={12} m={6} l={6} xl={6}>\n                            <TextInput\n                                password\n                                s={12}\n                                l={12}\n                                m={12}\n                                label='New Password'\n                                name='newPassword'\n                                value={user.newPassword}\n                                onChange={this.handlePasswordInputChange}\n                            />\n                        </Col>\n                        <Col s={12} m={6} l={6} xl={6}>\n                            <TextInput\n                                password\n                                s={12}\n                                l={12}\n                                m={12}\n                                label='Repeat Password'\n                                name='repeatPassword'\n                                value={user.repeatPassword}\n                                onChange={this.handlePasswordInputChange}\n                            />\n                        </Col>\n                    </Row>\n\n                    <Row>\n                        <Button node='button' type='submit' waves='light'>\n                            Change Password\n                            <Icon right>lock</Icon>\n                        </Button>\n                    </Row>\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\n"]},"metadata":{},"sourceType":"module"}