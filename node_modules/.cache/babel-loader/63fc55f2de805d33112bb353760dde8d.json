{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Table,Icon,Button,Row}from\"react-materialize\";import CreateNewUserModal from\"./CreateNewUserModal\";import API from\"../../../utils/API/API\";function mapStateToProps(state){return{};}var UserTable=/*#__PURE__*/function(_Component){_inherits(UserTable,_Component);function UserTable(){var _getPrototypeOf2;var _this;_classCallCheck(this,UserTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(UserTable)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={openModal:false,loading:false,successMessage:\"\",errorMessage:\"\"};_this.handleOpenModel=function(user){return function(){_this.setState(_objectSpread({},_this.state,{openModal:true,user:user}));};};_this.handleResetPassword=function(user){return function(){if(window.confirm(\"Reset Password for \".concat(user.name,\"?\"))){API.patch(\"/users/resetpassword\",{userId:user._id}).then(function(response){console.log(response.data);_this.setState({successMessage:\"Password reset!\",errorMessage:\"\"});}).catch(function(error){_this.setState({successMessage:\"\",errorMessage:\"Cannot Reset Password\"});});}};};_this.closeModal=function(){_this.setState({openModal:false});};_this.displayUser=function(){var users=_this.props.users;return users.map(function(user){return React.createElement(\"tr\",{key:user._id},React.createElement(\"td\",null,user.name),React.createElement(\"td\",null,user.email),React.createElement(\"td\",null,user.role),React.createElement(\"td\",null,user.active.toString()===\"true\"?React.createElement(\"span\",{className:\"dot active\"}):React.createElement(\"span\",{className:\"dot inactive\"})),React.createElement(\"td\",null,React.createElement(\"a\",{href:\"#\",onClick:_this.handleOpenModel(user)},React.createElement(Icon,null,\"edit\"))),React.createElement(\"td\",null,React.createElement(Button,{className:\"gradient-btn btn-green\",onClick:_this.handleResetPassword(user)},React.createElement(Icon,null,\"vpn_key\"))));});};return _this;}_createClass(UserTable,[{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,openModal=_this$state.openModal,user=_this$state.user;return React.createElement(\"div\",null,React.createElement(Table,{hoverable:true,responsive:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{\"data-field\":\"name\"},\"Name\"),React.createElement(\"th\",{\"data-field\":\"email\"},\"Email\"),React.createElement(\"th\",{\"data-field\":\"role\"},\"Role\"),React.createElement(\"th\",{\"data-field\":\"active\"},\"Active\"),React.createElement(\"th\",{\"data-field\":\"edit\"},\"Edit\"),React.createElement(\"th\",{\"data-field\":\"edit\"},\"Reset Password\"))),React.createElement(\"tbody\",null,this.displayUser())),openModal&&React.createElement(CreateNewUserModal,{closeCreateModal:this.closeModal,user:user}),React.createElement(Row,null,this.state.successMessage&&React.createElement(Row,{className:\"animated shake\"},React.createElement(\"p\",{className:\"green-text animated bounceOutLeft delay-3s\"},this.state.successMessage)),this.state.errorMessage&&React.createElement(Row,{className:\"animated rubberBand\"},React.createElement(\"p\",{className:\"red-text animated bounceOutLeft delay-3s \"},this.state.errorMessage))));}}]);return UserTable;}(Component);export default connect(mapStateToProps)(UserTable);","map":{"version":3,"sources":["C:/xampp/htdocs/beeblee-crm-client/src/features/admin/user/UserTable.jsx"],"names":["React","Component","connect","Table","Icon","Button","Row","CreateNewUserModal","API","mapStateToProps","state","UserTable","openModal","loading","successMessage","errorMessage","handleOpenModel","user","setState","handleResetPassword","window","confirm","name","patch","userId","_id","then","response","console","log","data","catch","error","closeModal","displayUser","users","props","map","email","role","active","toString"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Table, Icon, Button, Row } from \"react-materialize\";\r\nimport CreateNewUserModal from \"./CreateNewUserModal\";\r\nimport API from \"../../../utils/API/API\";\r\nfunction mapStateToProps(state) {\r\n  return {};\r\n}\r\n\r\nclass UserTable extends Component {\r\n  state = {\r\n    openModal: false,\r\n    loading: false,\r\n    successMessage: \"\",\r\n    errorMessage: \"\"\r\n  };\r\n  handleOpenModel = user => () => {\r\n    this.setState({\r\n      ...this.state,\r\n      openModal: true,\r\n      user\r\n    });\r\n  };\r\n\r\n  handleResetPassword = user => () => {\r\n    if (window.confirm(`Reset Password for ${user.name}?`)) {\r\n      API.patch(\"/users/resetpassword\", { userId: user._id })\r\n        .then(response => {\r\n          console.log(response.data);\r\n          this.setState({\r\n            successMessage: \"Password reset!\",\r\n            errorMessage: \"\"\r\n          });\r\n        })\r\n        .catch(error => {\r\n          this.setState({\r\n            successMessage: \"\",\r\n            errorMessage: \"Cannot Reset Password\"\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({\r\n      openModal: false\r\n    });\r\n  };\r\n  displayUser = () => {\r\n    const { users } = this.props;\r\n\r\n    return users.map(user => {\r\n      return (\r\n        <tr key={user._id}>\r\n          <td>{user.name}</td>\r\n          <td>{user.email}</td>\r\n          <td>{user.role}</td>\r\n          <td>\r\n            {user.active.toString() === \"true\" ? (\r\n              <span className=\"dot active\"></span>\r\n            ) : (\r\n              <span className=\"dot inactive\"></span>\r\n            )}\r\n          </td>\r\n          <td>\r\n            <a href=\"#\" onClick={this.handleOpenModel(user)}>\r\n              <Icon>edit</Icon>\r\n            </a>\r\n          </td>\r\n          <td>\r\n            <Button\r\n              className=\"gradient-btn btn-green\"\r\n              onClick={this.handleResetPassword(user)}\r\n            >\r\n              <Icon>vpn_key</Icon>\r\n            </Button>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  };\r\n  render() {\r\n    const { loading, openModal, user } = this.state;\r\n    return (\r\n      <div>\r\n        <Table hoverable={true} responsive={true}>\r\n          <thead>\r\n            <tr>\r\n              <th data-field=\"name\">Name</th>\r\n              <th data-field=\"email\">Email</th>\r\n              <th data-field=\"role\">Role</th>\r\n              <th data-field=\"active\">Active</th>\r\n              <th data-field=\"edit\">Edit</th>\r\n              <th data-field=\"edit\">Reset Password</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{this.displayUser()}</tbody>\r\n        </Table>\r\n        {openModal && (\r\n          <CreateNewUserModal closeCreateModal={this.closeModal} user={user} />\r\n        )}\r\n        <Row>\r\n          {this.state.successMessage && (\r\n            <Row className=\"animated shake\">\r\n              <p className=\"green-text animated bounceOutLeft delay-3s\">\r\n                {this.state.successMessage}\r\n              </p>\r\n            </Row>\r\n          )}\r\n          {this.state.errorMessage && (\r\n            <Row className=\"animated rubberBand\">\r\n              <p className=\"red-text animated bounceOutLeft delay-3s \">\r\n                {this.state.errorMessage}\r\n              </p>\r\n            </Row>\r\n          )}\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(UserTable);\r\n"]},"metadata":{},"sourceType":"module"}