{"ast":null,"code":"import { AUTHENTICATE } from '../constants/action-types';\nimport axios from 'axios';\nconst initialState = {\n  authenticated: false,\n  user: {}\n};\n\nfunction rootReducer(state = initialState, action) {\n  if (action.type === AUTHENTICATE) {\n    const user = {\n      email: action.payload.email,\n      password: action.payload.password\n    };\n    const returnValue = verifyUser(state = initialState, user); //    return Object.assign({}, state, {\n    //        ...state,\n    //        authenticated: action.payload.authenticated,\n    //       user: {\n    //           email: action.payload.email,\n    //           name: action.payload.name,\n    //           phone: action.payload.phone\n    //       }\n    //    })\n  }\n\n  return returnValue;\n}\n\nfunction verifyUser(state, user) {\n  axios.post(`http://localhost:3000/users/login`, {\n    email: user.email,\n    password: user.password\n  }).then(response => {\n    response.data.authenticated = true;\n\n    if (response.data) {\n      localStorage.setItem('user', response.data.user.email);\n      localStorage.setItem('token', response.data.token);\n    }\n\n    return Object.assign({}, state, {\n      authenticated: response.data.authenticated,\n      user: {\n        email: response.data.user.email,\n        name: response.data.user.name,\n        phone: response.data.user.phone\n      }\n    });\n  }).catch(error => {\n    return error;\n  });\n}\n\nexport default rootReducer;","map":{"version":3,"sources":["/Users/hanguyen/web-projects/crm-beeblee-node/client/src/redux/reducers/index.js"],"names":["AUTHENTICATE","axios","initialState","authenticated","user","rootReducer","state","action","type","email","payload","password","returnValue","verifyUser","post","then","response","data","localStorage","setItem","token","Object","assign","name","phone","catch","error"],"mappings":"AAAA,SAASA,YAAT,QAA8B,2BAA9B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,aAAa,EAAE,KADE;AAEjBC,EAAAA,IAAI,EAAE;AAFW,CAArB;;AAOA,SAAUC,WAAV,CAAsBC,KAAK,GAAGJ,YAA9B,EAA4CK,MAA5C,EAAoD;AAChD,MAAGA,MAAM,CAACC,IAAP,KAAgBR,YAAnB,EAAiC;AAC7B,UAAMI,IAAI,GAAG;AACTK,MAAAA,KAAK,EAAEF,MAAM,CAACG,OAAP,CAAeD,KADb;AAETE,MAAAA,QAAQ,EAAEJ,MAAM,CAACG,OAAP,CAAeC;AAFhB,KAAb;AAIA,UAAMC,WAAW,GAAGC,UAAU,CAACP,KAAK,GAAGJ,YAAT,EAAuBE,IAAvB,CAA9B,CAL6B,CAMjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACC;;AACD,SAAOQ,WAAP;AACH;;AAED,SAASC,UAAT,CAAoBP,KAApB,EAA2BF,IAA3B,EAAiC;AAC7BH,EAAAA,KAAK,CACJa,IADD,CACO,mCADP,EAC2C;AACvCL,IAAAA,KAAK,EAAEL,IAAI,CAACK,KAD2B;AAEvCE,IAAAA,QAAQ,EAAEP,IAAI,CAACO;AAFwB,GAD3C,EAKCI,IALD,CAKMC,QAAQ,IAAI;AACdA,IAAAA,QAAQ,CAACC,IAAT,CAAcd,aAAd,GAA8B,IAA9B;;AACA,QAAGa,QAAQ,CAACC,IAAZ,EAAkB;AACdC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BH,QAAQ,CAACC,IAAT,CAAcb,IAAd,CAAmBK,KAAhD;AACAS,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,QAAQ,CAACC,IAAT,CAAcG,KAA5C;AACH;;AACD,WAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBhB,KAAlB,EAAyB;AAC5BH,MAAAA,aAAa,EAAEa,QAAQ,CAACC,IAAT,CAAcd,aADD;AAE5BC,MAAAA,IAAI,EAAE;AACHK,QAAAA,KAAK,EAAEO,QAAQ,CAACC,IAAT,CAAcb,IAAd,CAAmBK,KADvB;AAEHc,QAAAA,IAAI,EAAEP,QAAQ,CAACC,IAAT,CAAcb,IAAd,CAAmBmB,IAFtB;AAGHC,QAAAA,KAAK,EAAER,QAAQ,CAACC,IAAT,CAAcb,IAAd,CAAmBoB;AAHvB;AAFsB,KAAzB,CAAP;AAQH,GAnBD,EAoBCC,KApBD,CAoBOC,KAAK,IAAI;AACb,WAAOA,KAAP;AACF,GAtBD;AAuBH;;AAGD,eAAerB,WAAf","sourcesContent":["import { AUTHENTICATE }  from '../constants/action-types'\nimport axios from 'axios'\n\n\nconst initialState = {\n    authenticated: false,\n    user: {\n        \n    }\n}\n\nfunction  rootReducer(state = initialState, action) {\n    if(action.type === AUTHENTICATE) {\n        const user = {\n            email: action.payload.email,\n            password: action.payload.password\n        }\n        const returnValue = verifyUser(state = initialState, user)\n    //    return Object.assign({}, state, {\n    //        ...state,\n    //        authenticated: action.payload.authenticated,\n    //       user: {\n    //           email: action.payload.email,\n    //           name: action.payload.name,\n    //           phone: action.payload.phone\n    //       }\n    //    })\n    }\n    return returnValue\n}\n\nfunction verifyUser(state, user) {\n    axios\n    .post(`http://localhost:3000/users/login`, {\n        email: user.email,\n        password: user.password,\n    })\n    .then(response => {\n        response.data.authenticated = true\n        if(response.data) {\n            localStorage.setItem('user', response.data.user.email)\n            localStorage.setItem('token', response.data.token)\n        }\n        return Object.assign({}, state, {\n            authenticated: response.data.authenticated,\n            user: {\n               email: response.data.user.email,\n               name: response.data.user.name,\n               phone: response.data.user.phone\n           }\n        })\n    })\n    .catch(error => {\n       return error\n    });\n}\n\n\nexport default rootReducer"]},"metadata":{},"sourceType":"module"}