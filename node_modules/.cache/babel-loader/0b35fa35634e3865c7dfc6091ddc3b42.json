{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ha Nguyen\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import API from\"../../utils/API/API\";import Loading from\"../loading/Loading\";import ProjectForm from\"./ProjectForm\";import{Row,Button,Icon,Tabs,Tab}from\"react-materialize\";import ProjectAccounts from\"./ProjectAccounts\";import{ContactTable}from\"../contact/ContactTable\";import ContactForm from\"../contact/ContactForm\";import UploadTable from\"../upload/UploadTable\";import UploadModal from\"../upload/UploadModal\";import{Link}from\"react-router-dom\";import BusinessForm from\"../business/BusinessForm\";import TextInput from\"react-materialize/lib/TextInput\";function mapStateToProps(state){return{};}var ProjectDetailPage=/*#__PURE__*/function(_Component){_inherits(ProjectDetailPage,_Component);function ProjectDetailPage(){var _getPrototypeOf2;var _this;_classCallCheck(this,ProjectDetailPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ProjectDetailPage)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loading:true,project:{}};_this.getProjectDetail=function(){var projectId=_this.props.match.params.id;//get the project detail first\nAPI.get(\"/projects/\".concat(projectId)).then(function(response){var project=response.data;var businessId=response.data.business._id;// then get the business contacts\nAPI.get(\"/businesses/\".concat(businessId)).then(function(response2){var business=response2.data.business;var contacts=business.contacts;_this.setState({contacts:contacts,business:business,project:project,loading:false});});}).catch(function(error){_this.setState({loading:true});_this.props.history.push(\"/notfound\");});};_this.handleGoBack=function(){_this.props.history.goBack();};_this.addMoreContactToTable=function(contact){var contacts=_this.state.contacts;if(!contacts.some(function(e){return e._id==contact._id;})){contacts.push(contact);_this.setState(_objectSpread({},_this.state,{contacts:contacts}));}};return _this;}_createClass(ProjectDetailPage,[{key:\"componentDidMount\",value:function componentDidMount(){this.getProjectDetail();}},{key:\"render\",value:function render(){var _this$state=this.state,project=_this$state.project,loading=_this$state.loading,business=_this$state.business,contacts=_this$state.contacts;if(loading){return React.createElement(Loading,null);}return React.createElement(\"div\",null,React.createElement(Row,{style:{marginTop:\"20px\"}},React.createElement(Button,{node:\"button\",type:\"submit\",waves:\"light\",className:\"gradient-btn btn-white\",onClick:this.handleGoBack},\"Go Back\",React.createElement(Icon,{left:true},\"arrow_back\"))),React.createElement(Row,{className:\" radius-corner\",style:{backgroundColor:\"white\",padding:\"20px\",boxShadow:\"1px 1px 1px #9E9E9E\"}},React.createElement(Row,null,React.createElement(\"h4\",null,\"Project Details \"),React.createElement(Link,{to:\"/businesses/\"+project.business._id},\"View all projects of this business\")),React.createElement(Tabs,{className:\"tab-demo z-depth-1 tabs-fixed-width\"},React.createElement(Tab,{active:true,options:{duration:300,onShow:null,responsiveThreshold:Infinity,swipeable:false},title:\"General Info\"},React.createElement(\"h5\",null,\"General Info\"),React.createElement(ProjectForm,{project:project})),React.createElement(Tab,{options:{duration:300,onShow:null,responsiveThreshold:Infinity,swipeable:false},title:\"Accounts\"},React.createElement(Row,null,React.createElement(\"h5\",null,\"Accounts \")),React.createElement(ProjectAccounts,{accounts:project.accounts,projectId:project._id,getProjectDetail:this.getProjectDetail})),React.createElement(Tab,{options:{duration:300,onShow:null,responsiveThreshold:Infinity,swipeable:false},title:\"Contacts\"},React.createElement(Row,null,React.createElement(\"h5\",null,\"Contacts \"),React.createElement(ContactForm,{business:business,addMoreContactToTable:this.addMoreContactToTable}),React.createElement(ContactTable,{contacts:contacts,business:business}))),React.createElement(Tab,{options:{duration:300,onShow:null,responsiveThreshold:Infinity,swipeable:false},title:\"Business\"},React.createElement(\"h5\",null,\"Business Detail:\"),React.createElement(BusinessForm,{business:business,updateData:this.getProjectDetail})),React.createElement(Tab,{options:{duration:300,onShow:null,responsiveThreshold:Infinity,swipeable:false},title:\"Uploads\"},React.createElement(\"h5\",null,\"Uploads\"),React.createElement(UploadModal,{projectId:project._id,getProjectDetail:this.getProjectDetail}),React.createElement(UploadTable,{uploads:project.uploads})))));}}]);return ProjectDetailPage;}(Component);export default connect(mapStateToProps)(ProjectDetailPage);","map":{"version":3,"sources":["C:/xampp/htdocs/beeblee-crm-client/src/features/projects/ProjectDetailPage.jsx"],"names":["React","Component","connect","API","Loading","ProjectForm","Row","Button","Icon","Tabs","Tab","ProjectAccounts","ContactTable","ContactForm","UploadTable","UploadModal","Link","BusinessForm","TextInput","mapStateToProps","state","ProjectDetailPage","loading","project","getProjectDetail","projectId","props","match","params","id","get","then","response","data","businessId","business","_id","response2","contacts","setState","catch","error","history","push","handleGoBack","goBack","addMoreContactToTable","contact","some","e","marginTop","backgroundColor","padding","boxShadow","duration","onShow","responsiveThreshold","Infinity","swipeable","accounts","uploads"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport API from \"../../utils/API/API\";\r\nimport Loading from \"../loading/Loading\";\r\nimport ProjectForm from \"./ProjectForm\";\r\nimport { Row, Button, Icon, Tabs, Tab } from \"react-materialize\";\r\nimport ProjectAccounts from \"./ProjectAccounts\";\r\nimport { ContactTable } from \"../contact/ContactTable\";\r\nimport ContactForm from \"../contact/ContactForm\";\r\nimport UploadTable from \"../upload/UploadTable\";\r\nimport UploadModal from \"../upload/UploadModal\";\r\nimport { Link } from \"react-router-dom\";\r\nimport BusinessForm from \"../business/BusinessForm\";\r\nimport TextInput from \"react-materialize/lib/TextInput\";\r\n\r\nfunction mapStateToProps(state) {\r\n  return {};\r\n}\r\n\r\nclass ProjectDetailPage extends Component {\r\n  state = {\r\n    loading: true,\r\n    project: {}\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getProjectDetail();\r\n  }\r\n\r\n  getProjectDetail = () => {\r\n    const projectId = this.props.match.params.id;\r\n    //get the project detail first\r\n    API.get(`/projects/${projectId}`)\r\n      .then(response => {\r\n        const project = response.data;\r\n        const businessId = response.data.business._id;\r\n        // then get the business contacts\r\n        API.get(`/businesses/${businessId}`).then(response2 => {\r\n          const business = response2.data.business;\r\n          const contacts = business.contacts;\r\n          this.setState({\r\n            contacts,\r\n            business,\r\n            project,\r\n            loading: false\r\n          });\r\n        });\r\n      })\r\n      .catch(error => {\r\n        this.setState({\r\n          loading: true\r\n        });\r\n        this.props.history.push(\"/notfound\");\r\n      });\r\n  };\r\n\r\n  handleGoBack = () => {\r\n    this.props.history.goBack();\r\n  };\r\n\r\n  addMoreContactToTable = contact => {\r\n    let contacts = this.state.contacts;\r\n    if (!contacts.some(e => e._id == contact._id)) {\r\n      contacts.push(contact);\r\n      this.setState({\r\n        ...this.state,\r\n        contacts\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { project, loading, business, contacts } = this.state;\r\n    if (loading) {\r\n      return <Loading />;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Row style={{ marginTop: \"20px\" }}>\r\n          <Button\r\n            node=\"button\"\r\n            type=\"submit\"\r\n            waves=\"light\"\r\n            className=\"gradient-btn btn-white\"\r\n            onClick={this.handleGoBack}\r\n          >\r\n            Go Back\r\n            <Icon left>arrow_back</Icon>\r\n          </Button>\r\n        </Row>\r\n        {/* <h5>Project Detail</h5> */}\r\n        <Row\r\n          className=\" radius-corner\"\r\n          style={{\r\n            backgroundColor: \"white\",\r\n            padding: \"20px\",\r\n            boxShadow: \"1px 1px 1px #9E9E9E\"\r\n          }}\r\n        >\r\n          <Row>\r\n            <h4>Project Details </h4>\r\n            <Link to={`/businesses/` + project.business._id}>\r\n              View all projects of this business\r\n            </Link>\r\n          </Row>\r\n\r\n          <Tabs className=\"tab-demo z-depth-1 tabs-fixed-width\">\r\n            <Tab\r\n              active\r\n              options={{\r\n                duration: 300,\r\n                onShow: null,\r\n                responsiveThreshold: Infinity,\r\n                swipeable: false\r\n              }}\r\n              title=\"General Info\"\r\n            >\r\n              <h5>General Info</h5>\r\n              <ProjectForm project={project} />\r\n            </Tab>\r\n            <Tab\r\n              options={{\r\n                duration: 300,\r\n                onShow: null,\r\n                responsiveThreshold: Infinity,\r\n                swipeable: false\r\n              }}\r\n              title=\"Accounts\"\r\n            >\r\n              <Row>\r\n                <h5>Accounts </h5>\r\n              </Row>\r\n\r\n              <ProjectAccounts\r\n                accounts={project.accounts}\r\n                projectId={project._id}\r\n                getProjectDetail={this.getProjectDetail}\r\n              />\r\n            </Tab>\r\n            <Tab\r\n              options={{\r\n                duration: 300,\r\n                onShow: null,\r\n                responsiveThreshold: Infinity,\r\n                swipeable: false\r\n              }}\r\n              title=\"Contacts\"\r\n            >\r\n              <Row>\r\n                <h5>Contacts </h5>\r\n                <ContactForm\r\n                  business={business}\r\n                  addMoreContactToTable={this.addMoreContactToTable}\r\n                />\r\n                <ContactTable contacts={contacts} business={business} />\r\n              </Row>\r\n            </Tab>\r\n\r\n            <Tab\r\n              options={{\r\n                duration: 300,\r\n                onShow: null,\r\n                responsiveThreshold: Infinity,\r\n                swipeable: false\r\n              }}\r\n              title=\"Business\"\r\n            >\r\n              <h5>Business Detail:</h5>\r\n              <BusinessForm\r\n                business={business}\r\n                updateData={this.getProjectDetail}\r\n              />\r\n            </Tab>\r\n            <Tab\r\n              options={{\r\n                duration: 300,\r\n                onShow: null,\r\n                responsiveThreshold: Infinity,\r\n                swipeable: false\r\n              }}\r\n              title=\"Uploads\"\r\n            >\r\n              <h5>Uploads</h5>\r\n              <UploadModal\r\n                projectId={project._id}\r\n                getProjectDetail={this.getProjectDetail}\r\n              />\r\n              <UploadTable uploads={project.uploads} />\r\n            </Tab>\r\n          </Tabs>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ProjectDetailPage);\r\n"]},"metadata":{},"sourceType":"module"}